<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siêu Sổ Tay Từ Vựng Global Success 10-11-12</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Draggable.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0fdf4; color: #1f2937; }
        
        /* Main UI Styles */
        .grade-btn.active { background-color: #047857; color: white; transform: scale(1.05); }
        .unit-button.active { background-color: #10b981; color: white; box-shadow: 0 4px 6px rgba(16, 185, 129, 0.4); }
        .tab-button.active { border-bottom: 4px solid #10b981; color: #10b981; font-weight: 800; }
        
        /* Flashcard Styles */
        .flashcard-container { perspective: 1000px; width: 100%; height: 350px; }
        .flashcard { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: transform 0.6s; cursor: pointer; }
        .flashcard.flipped { transform: rotateY(180deg); }
        .flashcard-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 20px; box-shadow: 0 15px 25px rgba(0,0,0,0.1); padding: 30px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; background: white; border: 2px solid #e2e8f0; }
        .flashcard-back { transform: rotateY(180deg); background-color: #f0fdfa; }
        
        /* Quiz & Listening Styles */
        .quiz-option { transition: all 0.2s; cursor: pointer; border: 2px solid #e5e7eb; padding: 12px; border-radius: 12px; background: white;}
        .quiz-option:hover { border-color: #10b981; background: #f0fdf4; }
        .quiz-option.correct { background: #d1fae5; border-color: #10b981; color: #065f46; font-weight: bold; }
        .quiz-option.incorrect { background: #fee2e2; border-color: #ef4444; color: #991b1b; }
        
        /* Dialogue Styles */
        .dialogue-bubble { position: relative; background: #f9fafb; border-radius: 15px; padding: 15px; margin-bottom: 10px; border-left: 5px solid #10b981; }
        .dialogue-bubble.female { border-left-color: #ec4899; }
        .dialogue-bubble.male { border-left-color: #3b82f6; }

        /* MATCHING GAME STYLES */
        .card-item {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            background: white;
            border: 2px solid #e5e7eb;
        }
        .card-item:hover:not(.matched):not(.selected) {
            transform: translateY(-2px);
            border-color: #10b981;
            background-color: #f0fdf4;
        }
        .card-item.selected {
            border: 2px solid #3b82f6 !important; /* Blue select */
            background-color: #eff6ff !important;
            transform: scale(1.02);
        }
        .card-item.matched {
            border: 2px solid #10b981 !important; /* Emerald Match */
            background-color: #d1fae5 !important;
            color: #065f46;
            cursor: default;
            pointer-events: none;
            opacity: 0.7;
        }
        .card-item.incorrect-match {
            border-color: #ef4444 !important;
            background-color: #fee2e2 !important;
            animation: shake 0.5s;
        }

        /* SCRAMBLE GAME STYLES */
        .letter-chip {
            width: 45px; height: 45px;
            display: flex; justify-content: center; align-items: center;
            font-weight: 800; font-size: 1.2rem;
            border-radius: 8px;
            background: white;
            border: 2px solid #e5e7eb;
            cursor: grab; /* Changed to grab */
            transition: background-color 0.2s, border-color 0.2s; /* Removed transform transition for drag */
            text-transform: uppercase;
            user-select: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            z-index: 10; /* Ensure chips are on top */
            touch-action: none; /* Crucial for mobile drag */
        }
        .letter-chip:active { cursor: grabbing; z-index: 50; }
        .letter-chip:hover { border-color: #10b981; }
        .letter-chip.correct-place { background-color: #d1fae5; border-color: #10b981; color: #065f46; }

        .letter-slot {
            width: 50px; height: 50px; /* Increased size slightly */
            border-bottom: 3px solid #cbd5e1;
            background-color: #f8fafc;
            border-radius: 8px;
            display: flex; justify-content: center; align-items: center;
            margin: 0 5px;
        }
        .letter-slot.filled { border-bottom-color: #10b981; }

        /* Practice Menu Buttons */
        .practice-menu-btn {
            transition: all 0.2s;
        }
        .practice-menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .practice-menu-btn.active {
            background-color: #10b981;
            color: white;
            border-color: #10b981;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
    </style>
</head>
<body>
    <div class="max-w-5xl mx-auto p-4 md:p-10">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-black text-gray-900 tracking-tight">HỆ THỐNG TỪ VỰNG TIẾNG ANH 10-11-12</h1>
            <p class="text-emerald-600 font-bold text-lg mt-2 uppercase tracking-widest">Global Success Series</p>
        </header>

        <div id="grade-selection" class="flex justify-center gap-4 mb-8">
            <button class="grade-btn px-8 py-3 rounded-2xl font-bold bg-white shadow-md border-2 border-emerald-100 active" data-grade="10">LỚP 10</button>
            <button class="grade-btn px-8 py-3 rounded-2xl font-bold bg-white shadow-md border-2 border-emerald-100" data-grade="11">LỚP 11</button>
            <button class="grade-btn px-8 py-3 rounded-2xl font-bold bg-white shadow-md border-2 border-emerald-100" data-grade="12">LỚP 12</button>
        </div>

        <div id="unit-selection" class="grid grid-cols-5 md:grid-cols-10 gap-2 mb-8 p-4 bg-white rounded-3xl shadow-xl border border-emerald-50">
            </div>

        <div class="flex bg-white rounded-t-3xl shadow-sm border-b overflow-hidden">
            <button class="tab-button flex-1 py-5 font-bold text-gray-500 active" data-tab="flashcard"><i class="fas fa-bolt mr-2"></i>Flashcard</button>
            <button class="tab-button flex-1 py-5 font-bold text-gray-500" data-tab="list"><i class="fas fa-table mr-2"></i>Danh sách</button>
            <button class="tab-button flex-1 py-5 font-bold text-gray-500" data-tab="dialogue"><i class="fas fa-comments mr-2"></i>Hội thoại</button>
            <button class="tab-button flex-1 py-5 font-bold text-gray-500" data-tab="practice"><i class="fas fa-gamepad mr-2"></i>Luyện tập</button>
        </div>

        <div id="main-content" class="bg-white p-8 rounded-b-3xl shadow-2xl min-h-[500px]">
            <h2 id="display-title" class="text-3xl font-extrabold text-center text-gray-800 mb-8 underline decoration-emerald-400"></h2>
            
            <div id="flashcard-section" class="tab-content">
                <div class="flashcard-container">
                    <div id="main-flashcard" class="flashcard">
                        <div class="flashcard-face">
                            <div class="flex items-center gap-4 text-emerald-600 mb-4 cursor-pointer" onclick="speakCurrentWord()">
                                <span id="fc-word" class="text-5xl font-black"></span>
                                <i class="fas fa-volume-up text-3xl"></i>
                            </div>
                            <p id="fc-ipa-front" class="text-xl font-mono text-gray-400 italic"></p>
                        </div>
                        <div class="flashcard-face flashcard-back">
                            <p class="text-sm font-bold text-emerald-500 uppercase tracking-widest mb-2">Định nghĩa</p>
                            <p id="fc-def" class="text-3xl font-bold text-gray-800"></p>
                        </div>
                    </div>
                </div>
                <div class="flex justify-center items-center gap-8 mt-10">
                    <button id="fc-prev" class="w-14 h-14 rounded-full bg-gray-100 hover:bg-emerald-100 transition shadow"><i class="fas fa-chevron-left"></i></button>
                    <button id="fc-flip" class="px-10 py-4 rounded-full bg-emerald-500 text-white font-black shadow-lg hover:bg-emerald-600 transform transition">LẬT THẺ</button>
                    <button id="fc-next" class="w-14 h-14 rounded-full bg-gray-100 hover:bg-emerald-100 transition shadow"><i class="fas fa-chevron-right"></i></button>
                </div>
                <p id="fc-counter" class="text-center mt-6 text-gray-400 font-bold"></p>
            </div>

            <div id="list-section" class="tab-content hidden">
                <div class="overflow-x-auto rounded-2xl border border-gray-100">
                    <table class="w-full text-left">
                        <thead class="bg-emerald-500 text-white">
                            <tr>
                                <th class="p-4">Từ vựng</th>
                                <th class="p-4">Phiên âm</th>
                                <th class="p-4">Nghĩa tiếng Việt</th>
                            </tr>
                        </thead>
                        <tbody id="vocab-table-body" class="divide-y divide-gray-50"></tbody>
                    </table>
                </div>
            </div>

            <div id="dialogue-section" class="tab-content hidden">
                <div class="max-w-2xl mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-emerald-700"><i class="fas fa-headphones mr-2"></i>Nghe hội thoại (Nam/Nữ)</h3>
                        <button onclick="speakDialogue()" class="bg-emerald-100 text-emerald-700 px-4 py-2 rounded-full font-bold hover:bg-emerald-200 transition">
                            <i class="fas fa-play mr-2"></i>Phát Audio
                        </button>
                    </div>
                    <div id="dialogue-content" class="space-y-4">
                    </div>
                </div>
            </div>

            <div id="practice-section" class="tab-content hidden">
                <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-8">
                    <button id="btn-mode-quiz" class="practice-menu-btn px-3 py-3 rounded-xl font-bold bg-emerald-600 text-white shadow-md border border-emerald-600 active" onclick="switchPracticeMode('quiz')">
                        <i class="fas fa-question-circle mb-1 block text-2xl"></i> Trắc Nghiệm
                    </button>
                    <button id="btn-mode-matching" class="practice-menu-btn px-3 py-3 rounded-xl font-bold bg-white text-gray-600 border border-gray-200 shadow-sm" onclick="switchPracticeMode('matching')">
                        <i class="fas fa-puzzle-piece mb-1 block text-2xl"></i> Ghép Từ
                    </button>
                    <button id="btn-mode-listening" class="practice-menu-btn px-3 py-3 rounded-xl font-bold bg-white text-gray-600 border border-gray-200 shadow-sm" onclick="switchPracticeMode('listening')">
                        <i class="fas fa-volume-up mb-1 block text-2xl"></i> Nghe & Chọn
                    </button>
                    <button id="btn-mode-fillblank" class="practice-menu-btn px-3 py-3 rounded-xl font-bold bg-white text-gray-600 border border-gray-200 shadow-sm" onclick="switchPracticeMode('fillblank')">
                        <i class="fas fa-keyboard mb-1 block text-2xl"></i> Điền Từ
                    </button>
                    <button id="btn-mode-scramble" class="practice-menu-btn px-3 py-3 rounded-xl font-bold bg-white text-gray-600 border border-gray-200 shadow-sm" onclick="switchPracticeMode('scramble')">
                        <i class="fas fa-sort-alpha-down mb-1 block text-2xl"></i> Sắp Xếp
                    </button>
                </div>

                <div id="quiz-area" class="max-w-xl mx-auto text-center">
                    <div class="bg-emerald-50 rounded-2xl p-6 mb-6">
                        <span class="text-sm font-bold text-emerald-600 uppercase tracking-widest">Câu hỏi</span>
                        <p id="quiz-question" class="text-2xl font-bold mt-2 text-gray-800"></p>
                    </div>
                    <div id="quiz-options" class="grid grid-cols-1 gap-3 text-left"></div>
                    <button id="quiz-next-btn" class="mt-8 px-8 py-3 bg-emerald-600 text-white font-bold rounded-xl hidden hover:bg-emerald-700 transition">Tiếp theo <i class="fas fa-arrow-right ml-2"></i></button>
                </div>

                <div id="matching-area" class="hidden max-w-4xl mx-auto">
                    <div class="text-center mb-4">
                        <p class="text-gray-500 italic text-sm">Chọn từ tiếng Anh và nghĩa tiếng Việt tương ứng.</p>
                        <div id="matching-message" class="h-6 text-sm font-bold mt-2 text-emerald-600"></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-emerald-50/50 p-4 rounded-2xl border border-emerald-100">
                            <h3 class="text-center font-bold text-emerald-700 mb-3 text-sm uppercase">Tiếng Anh</h3>
                            <div id="match-col-en" class="space-y-3"></div>
                        </div>
                        <div class="bg-orange-50/50 p-4 rounded-2xl border border-orange-100">
                            <h3 class="text-center font-bold text-orange-700 mb-3 text-sm uppercase">Tiếng Việt</h3>
                            <div id="match-col-vi" class="space-y-3"></div>
                        </div>
                    </div>
                    <div class="text-center mt-6">
                        <button onclick="setupMatchingGame()" class="px-6 py-2 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 transition text-sm"><i class="fas fa-redo mr-2"></i>Làm mới</button>
                    </div>
                </div>

                <div id="listening-area" class="hidden max-w-xl mx-auto text-center">
                    <div class="bg-blue-50 rounded-2xl p-8 mb-6">
                        <div class="w-24 h-24 bg-blue-500 rounded-full flex items-center justify-center mx-auto shadow-lg cursor-pointer hover:bg-blue-600 transition hover:scale-105" onclick="replayListening()">
                            <i class="fas fa-volume-up text-4xl text-white"></i>
                        </div>
                        <p class="text-blue-600 font-bold mt-4">Nghe và chọn nghĩa đúng</p>
                    </div>
                    <div id="listening-options" class="grid grid-cols-1 gap-3 text-left"></div>
                    <button id="listening-next-btn" class="mt-8 px-8 py-3 bg-blue-600 text-white font-bold rounded-xl hidden hover:bg-blue-700 transition">Tiếp theo <i class="fas fa-arrow-right ml-2"></i></button>
                </div>

                <div id="fillblank-area" class="hidden max-w-xl mx-auto text-center">
                    <div class="bg-purple-50 rounded-2xl p-6 mb-6">
                        <span class="text-sm font-bold text-purple-600 uppercase tracking-widest">Định nghĩa</span>
                        <p id="fb-def" class="text-xl font-bold mt-2 text-gray-800"></p>
                    </div>
                    
                    <div class="relative">
                        <input type="text" id="fb-input" class="w-full text-center text-3xl font-bold py-4 border-b-4 border-gray-300 focus:border-purple-500 outline-none bg-transparent transition tracking-wider text-purple-900 placeholder-gray-300" placeholder="Gõ từ vựng..." autocomplete="off">
                        <p id="fb-hint" class="mt-2 text-sm text-gray-400 italic h-5"></p>
                    </div>

                    <div class="flex justify-center gap-4 mt-8">
                        <button onclick="showHint()" class="px-6 py-3 bg-yellow-100 text-yellow-700 font-bold rounded-xl hover:bg-yellow-200 transition"><i class="fas fa-lightbulb mr-2"></i>Gợi ý</button>
                        <button onclick="checkFillBlank()" class="px-8 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 transition shadow-lg">Kiểm tra</button>
                    </div>
                    <div id="fb-feedback" class="mt-6 text-lg font-bold h-8"></div>
                     <button id="fb-next-btn" class="mt-4 px-8 py-3 bg-gray-800 text-white font-bold rounded-xl hidden hover:bg-gray-900 transition">Câu tiếp theo</button>
                </div>

                <div id="scramble-area" class="hidden max-w-xl mx-auto text-center">
                    <div class="bg-indigo-50 rounded-2xl p-6 mb-8">
                        <span class="text-sm font-bold text-indigo-600 uppercase tracking-widest">Kéo và thả ký tự vào ô trống</span>
                        <p id="scramble-def" class="text-xl font-bold mt-2 text-gray-800"></p>
                    </div>

                    <div id="scramble-slots" class="flex flex-wrap justify-center gap-2 mb-10 min-h-[60px]">
                        </div>

                    <div id="scramble-pool" class="flex flex-wrap justify-center gap-3 mb-8 min-h-[60px]">
                        </div>

                    <div class="flex justify-center gap-4">
                        <button onclick="resetScramble()" class="px-6 py-3 bg-gray-200 text-gray-700 font-bold rounded-xl hover:bg-gray-300 transition"><i class="fas fa-undo mr-2"></i>Làm lại</button>
                        <button id="scramble-next-btn" class="px-8 py-3 bg-indigo-600 text-white font-bold rounded-xl hidden hover:bg-indigo-700 transition">Câu tiếp theo</button>
                    </div>
                    <div id="scramble-feedback" class="mt-4 h-6 text-lg font-bold"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const allVocabData = {
            "10": {
                "unit-1": { title: "FAMILY LIFE", words: [
                    { word: "Benefit", ipa: "/ˈbenɪfɪt/", def: "Lợi ích" },
                    { word: "Bond", ipa: "/bɒnd/", def: "Sự gắn bó" },
                    { word: "Breadwinner", ipa: "/ˈbredwɪnə(r)/", def: "Người trụ cột đi làm nuôi gia đình" },
                    { word: "Character", ipa: "/ˈkærəktə(r)/", def: "Tính cách" },
                    { word: "Cheer up", ipa: "/tʃɪə(r) ʌp/", def: "Cổ vũ, làm vui lên" },
                    { word: "Damage", ipa: "/ˈdæmɪdʒ/", def: "Làm hỏng" },
                    { word: "Gratitude", ipa: "/ˈɡrætɪtjuːd/", def: "Lòng biết ơn" },
                    { word: "Grocery", ipa: "/ˈɡrəʊsəri/", def: "Thực phẩm, tạp hoá" },
                    { word: "Heavy lifting", ipa: "/ˌhevi ˈlɪftɪŋ/", def: "Mang vác nặng" },
                    { word: "Homemaker", ipa: "/ˈhəʊmmeɪkə(r)/", def: "Người nội trợ" },
                    { word: "Laundry", ipa: "/ˈlɔːndri/", def: "Quần áo, đồ giặt" },
                    { word: "Manner", ipa: "/ˈmænə(r)/", def: "Cách cư xử" },
                    { word: "Responsibility", ipa: "/rɪˌspɒnsəˈbɪləti/", def: "Trách nhiệm" },
                    { word: "Routine", ipa: "/ruːˈtiːn/", def: "Thói quen hằng ngày" },
                    { word: "Rubbish", ipa: "/ˈrʌbɪʃ/", def: "Rác" },
                    { word: "Spotlessly", ipa: "/ˈspɒtləsli/", def: "Sạch không tì vết" },
                    { word: "Strengthen", ipa: "/ˈstreŋθn/", def: "Củng cố" },
                    { word: "Support", ipa: "/səˈpɔːt/", def: "Hỗ trợ" },
                    { word: "Truthful", ipa: "/ˈtruːθfl/", def: "Trung thực" },
                    { word: "Value", ipa: "/ˈvæljuː/", def: "Giá trị" },
                    { word: "Washing-up", ipa: "/ˌwɒʃɪŋ ˈʌp/", def: "Rửa bát" }
                ], dialogue: [
                    { speaker: "Nam", gender: "male", text: "In my family, my dad is the breadwinner, but he still helps with the heavy lifting." },
                    { speaker: "Lan", gender: "female", text: "That's great! My mom is a homemaker, and she manages all the groceries and laundry." },
                    { speaker: "Nam", gender: "male", text: "We should share the household responsibilities to strengthen our family bonds." }
                ]},
                "unit-2": { title: "GREEN LIVING", words: [
                    { word: "Adopt", ipa: "/əˈdɒpt/", def: "Theo, chọn theo" },
                    { word: "Appliance", ipa: "/əˈplaɪəns/", def: "Thiết thiết bị" },
                    { word: "Awareness", ipa: "/əˈweənəs/", def: "Nhận thức" },
                    { word: "Calculate", ipa: "/ˈkælkjuleɪt/", def: "Tính toán" },
                    { word: "Carbon footprint", ipa: "/ˌkɑːbən ˈfʊtprɪnt/", def: "Dấu chân carbon" },
                    { word: "Chemical", ipa: "/ˈkemɪkl/", def: "Hoá chất" },
                    { word: "Eco-friendly", ipa: "/ˌiːkəʊ ˈfrendli/", def: "Thân thiện môi trường" },
                    { word: "Electrical", ipa: "/ɪˈlektrɪkl/", def: "Thuộc về điện" },
                    { word: "Emission", ipa: "/iˈmɪʃn/", def: "Sự thải ra" },
                    { word: "Encourage", ipa: "/ɪnˈkʌrɪdʒ/", def: "Khuyến khích" },
                    { word: "Energy", ipa: "/ˈenədʒi/", def: "Năng lượng" },
                    { word: "Estimate", ipa: "/ˈestɪmeɪt/", def: "Ước tính" },
                    { word: "Global", ipa: "/ˈɡləʊbl/", def: "Toàn cầu" },
                    { word: "Human", ipa: "/ˈhjuːmən/", def: "Con người" },
                    { word: "Issue", ipa: "/ˈɪʃuː/", def: "Vấn đề" },
                    { word: "Litter", ipa: "/ˈlɪtə(r)/", def: "Rác thải, xả rác" },
                    { word: "Organise", ipa: "/ˈɔːɡənaɪz/", def: "Tổ chức" },
                    { word: "Pollute", ipa: "/pəˈluːt/", def: "Ô nhiễm" },
                    { word: "Refill", ipa: "/ˌriːˈfɪl/", def: "Làm đầy lại" },
                    { word: "Release", ipa: "/rɪˈliːs/", def: "Giải phóng, thải ra" }
                ], dialogue: [
                    { speaker: "Mai", gender: "female", text: "We should adopt a greener lifestyle to reduce our carbon footprint." },
                    { speaker: "Ben", gender: "male", text: "I agree. We can start by using eco-friendly appliances and recycling litter." },
                    { speaker: "Mai", gender: "female", text: "Exactly. Raising awareness about environmental issues is very important now." }
                ]},
                "unit-3": { title: "MUSIC", words: [
                    { word: "Audience", ipa: "/ˈɔːdiens/", def: "Khán giả" },
                    { word: "Common", ipa: "/ˈkɒmən/", def: "Phổ biến" },
                    { word: "Competition", ipa: "/ˌkɒmpəˈtɪʃn/", def: "Cuộc thi" },
                    { word: "Create", ipa: "/kriˈeɪt/", def: "Sáng tạo" },
                    { word: "Decide", ipa: "/dɪˈsaɪd/", def: "Quyết định" },
                    { word: "Fan", ipa: "/fæn/", def: "Người hâm mộ" },
                    { word: "Identify", ipa: "/aɪˈdentɪfaɪ/", def: "Nhận diện" },
                    { word: "Instrument", ipa: "/ˈɪnstrəmənt/", def: "Nhạc cụ" },
                    { word: "Judge", ipa: "/dʒʌdʒ/", def: "Giám khảo" },
                    { word: "Live", ipa: "/laɪv/", def: "Trực tiếp" },
                    { word: "Music video", ipa: "/ˈmjuːzɪk ˈvɪdiəʊ/", def: "Video âm nhạc" },
                    { word: "Organise", ipa: "/ˈɔːɡənaɪz/", def: "Tổ chức" },
                    { word: "Participant", ipa: "/pɑːˈtɪsɪpənt/", def: "Người tham gia" },
                    { word: "Perform", ipa: "/pəˈfɔːm/", def: "Biểu diễn" },
                    { word: "Popular", ipa: "/ˈpɒpjələ(r)/", def: "Phổ biến" },
                    { word: "Programme", ipa: "/ˈprəʊɡræm/", def: "Chương trình" },
                    { word: "Season", ipa: "/ˈsiːzn/", def: "Mùa" },
                    { word: "Single", ipa: "/ˈsɪŋɡl/", def: "Đĩa đơn" },
                    { word: "Talent", ipa: "/ˈtælənt/", def: "Tài năng" },
                    { word: "Upload", ipa: "/ˌʌpˈləʊd/", def: "Tải lên" }
                ], dialogue: [
                    { speaker: "An", gender: "female", text: "Did you watch the talent competition on TV last night?" },
                    { speaker: "Khoa", gender: "male", text: "Yes! The participants performed so well. The audience was very excited." },
                    { speaker: "An", gender: "female", text: "The judges had a hard time deciding the winner because everyone was so talented." }
                ]},
                "unit-4": { title: "FOR A BETTER COMMUNITY", words: [
                    { word: "Advertise", ipa: "/ˈædvətaɪz/", def: "Quảng cáo" },
                    { word: "Announcement", ipa: "/əˈnaʊnsmənt/", def: "Thông báo" },
                    { word: "Apply", ipa: "/əˈplaɪ/", def: "Nộp đơn" },
                    { word: "Benefit", ipa: "/ˈbenɪfɪt/", def: "Lợi ích" },
                    { word: "Boost", ipa: "/buːst/", def: "Đẩy mạnh" },
                    { word: "Candidate", ipa: "/ˈkændɪdeɪt/", def: "Ứng viên" },
                    { word: "Community", ipa: "/kəˈmjuːnəti/", def: "Cộng đồng" },
                    { word: "Contribution", ipa: "/ˌkɒntrɪˈbjuːʃn/", def: "Sự đóng góp" },
                    { word: "Development", ipa: "/dɪˈveləpmənt/", def: "Sự phát triển" },
                    { word: "Donate", ipa: "/dəʊˈneɪt/", def: "Quyên góp" },
                    { word: "Experience", ipa: "/ɪkˈspɪəriəns/", def: "Kinh nghiệm" },
                    { word: "Grateful", ipa: "/ˈɡreɪtfl/", def: "Biết ơn" },
                    { word: "Helpful", ipa: "/ˈhelpfl/", def: "Có ích" },
                    { word: "Interviewer", ipa: "/ˈɪntəvjuːə(r)/", def: "Người phỏng vấn" },
                    { word: "Meaningful", ipa: "/ˈmiːnɪŋfl/", def: "Có ý nghĩa" },
                    { word: "Opportunity", ipa: "/ˌɒpəˈtjuːnəti/", def: "Cơ hội" },
                    { word: "Remote", ipa: "/rɪˈməʊt/", def: "Xa xôi" },
                    { word: "Strengthen", ipa: "/ˈstreŋθn/", def: "Củng cố" },
                    { word: "Tutor", ipa: "/ˈtjuːtə(r)/", def: "Gia sư" },
                    { word: "Volunteer", ipa: "/ˌvɒlənˈtɪə(r)/", def: "Tình nguyện viên" }
                ], dialogue: [
                    { speaker: "Tom", gender: "male", text: "I want to apply for a volunteer position to help children in remote areas." },
                    { speaker: "Linda", gender: "female", text: "That's a meaningful contribution. You can tutor them in English." },
                    { speaker: "Tom", gender: "male", text: "I hope this opportunity will help me gain more experience and boost my confidence." }
                ]},
                "unit-5": { title: "INVENTIONS", words: [
                    { word: "Artificial intelligence", ipa: "/ˌɑːtɪfɪʃl ɪnˈtelɪɡəns/", def: "Trí tuệ nhân tạo" },
                    { word: "Beneficial", ipa: "/ˌbenɪˈfɪʃl/", def: "Có lợi" },
                    { word: "Capable", ipa: "/ˈkeɪpəbl/", def: "Có khả năng" },
                    { word: "Charger", ipa: "/ˈtʃɑːdʒə(r)/", def: "Sạc" },
                    { word: "Communicate", ipa: "/kəˈmjuːnɪkeɪt/", def: "Giao tiếp" },
                    { word: "Computer", ipa: "/kəmˈpjuːtə(r)/", def: "Máy tính" },
                    { word: "Convenient", ipa: "/kənˈviːniənt/", def: "Tiện lợi" },
                    { word: "Device", ipa: "/dɪˈvaɪs/", def: "Thiết bị" },
                    { word: "Discovery", ipa: "/dɪˈskʌvəri/", def: "Khám phá" },
                    { word: "Ebook", ipa: "/ˈiː bʊk/", def: "Sách điện tử" },
                    { word: "Educational", ipa: "/ˌedʒuˈkeɪʃənl/", def: "Thuộc giáo dục" },
                    { word: "Expensive", ipa: "/ɪkˈspensɪv/", def: "Đắt tiền" },
                    { word: "Experiment", ipa: "/ɪkˈsperɪmənt/", def: "Thí nghiệm" },
                    { word: "Invention", ipa: "/ɪnˈvenʃn/", def: "Phát minh" },
                    { word: "Laptop", ipa: "/ˈlæptɒp/", def: "Máy tính xách tay" },
                    { word: "Portable", ipa: "/ˈpɔːtəbl/", def: "Có thể mang theo" },
                    { word: "Smartphone", ipa: "/ˈsmɑːtfəʊn/", def: "Điện thoại thông minh" },
                    { word: "Technology", ipa: "/tekˈnɒlədʒi/", def: "Công nghệ" },
                    { word: "Useful", ipa: "/ˈjuːsfl/", def: "Hữu ích" },
                    { word: "Vaccine", ipa: "/ˈvæksiːn/", def: "Vắc-xin" }
                ], dialogue: [
                    { speaker: "Huy", gender: "male", text: "Which invention do you think is the most useful in our daily life?" },
                    { speaker: "Emma", gender: "female", text: "I think the smartphone is very convenient because it's portable and helps us communicate easily." },
                    { speaker: "Huy", gender: "male", text: "True, but artificial intelligence is also making many devices smarter and more beneficial." }
                ]},
                "unit-6": { title: "GENDER EQUALITY", words: [
                    { word: "Address", ipa: "/əˈdres/", def: "Giải quyết" },
                    { word: "Affect", ipa: "/əˈfekt/", def: "Ảnh hưởng" },
                    { word: "Allow", ipa: "/əˈlaʊ/", def: "Cho phép" },
                    { word: "Caregiver", ipa: "/ˈkeəɡɪvə(r)/", def: "Người chăm sóc" },
                    { word: "Challenge", ipa: "/ˈtʃælɪndʒ/", def: "Thử thách" },
                    { word: "Discrimination", ipa: "/dɪˌskrɪmɪˈneɪʃn/", def: "Sự phân biệt đối xử" },
                    { word: "Education", ipa: "/ˌedʒuˈkeɪʃn/", def: "Giáo dục" },
                    { word: "Eliminate", ipa: "/ɪˈlɪmɪneɪt/", def: "Loại bỏ" },
                    { word: "Encourage", ipa: "/ɪnˈkʌrɪdʒ/", def: "Khuyến khích" },
                    { word: "Equality", ipa: "/iˈkwɒləti/", def: "Sự bình đẳng" },
                    { word: "Gender", ipa: "/ˈdʒendə(r)/", def: "Giới tính" },
                    { word: "Involve", ipa: "/ɪnˈvɒlv/", def: "Liên quan" },
                    { word: "Labour force", ipa: "/ˈleɪbə fɔːs/", def: "Lực lượng lao động" },
                    { word: "Opportunity", ipa: "/ˌɒpəˈtjuːnəti/", def: "Cơ hội" },
                    { word: "Perform", ipa: "/pəˈfɔːm/", def: "Thực hiện" },
                    { word: "Preference", ipa: "/ˈprefrəns/", def: "Sự ưu tiên" },
                    { word: "Pursue", ipa: "/pəˈsjuː/", def: "Theo đuổi" },
                    { word: "Responsibility", ipa: "/rɪˌspɒnsəˈbɪləti/", def: "Trách nhiệm" },
                    { word: "Right", ipa: "/raɪt/", def: "Quyền lợi" },
                    { word: "Wage", ipa: "/weɪdʒ/", def: "Tiền lương" }
                ], dialogue: [
                    { speaker: "Ms. Hoa", gender: "female", text: "We should eliminate gender discrimination to create equal opportunities for everyone." },
                    { speaker: "Nam", gender: "male", text: "I agree. Men and women should share the responsibility of being caregivers at home." },
                    { speaker: "Ms. Hoa", gender: "female", text: "Exactly. Both genders should be encouraged to pursue any career they want." }
                ]},
                "unit-7": { title: "VIETNAM AND THE INTERNATIONAL ORGANISATIONS", words: [
                    { word: "Active", ipa: "/ˈæktɪv/", def: "Tích cực" },
                    { word: "Admission", ipa: "/ədˈmɪʃn/", def: "Sự nhận vào" },
                    { word: "Commitment", ipa: "/kəˈmɪtmənt/", def: "Sự cam kết" },
                    { word: "Community", ipa: "/kəˈmjuːnəti/", def: "Cộng đồng" },
                    { word: "Cultural", ipa: "/ˈkʌltʃərəl/", def: "Thuộc văn hóa" },
                    { word: "Economy", ipa: "/ɪˈkɒnəmi/", def: "Nền kinh tế" },
                    { word: "Education", ipa: "/ˌedʒuˈkeɪʃn/", def: "Giáo dục" },
                    { word: "External", ipa: "/ɪkˈstɜːnl/", def: "Bên ngoài" },
                    { word: "International", ipa: "/ˌɪntəˈnæʃnəl/", def: "Quốc tế" },
                    { word: "Investment", ipa: "/ɪnˈvestmənt/", def: "Sự đầu tư" },
                    { word: "Member", ipa: "/ˈmembə(r)/", def: "Thành viên" },
                    { word: "Opportunity", ipa: "/ˌɒpəˈtjuːnəti/", def: "Cơ hội" },
                    { word: "Organisation", ipa: "/ˌɔːɡənaɪˈzeɪʃn/", def: "Tổ chức" },
                    { word: "Participate", ipa: "/pɑːˈtɪsɪpeɪt/", def: "Tham gia" },
                    { word: "Peace", ipa: "/piːs/", def: "Hòa bình" },
                    { word: "Poverty", ipa: "/ˈpɒvəti/", def: "Sự nghèo đói" },
                    { word: "Promote", ipa: "/prəˈməʊt/", def: "Thúc đẩy" },
                    { word: "Regional", ipa: "/ˈriːdʒənl/", def: "Thuộc khu vực" },
                    { word: "Relation", ipa: "/rɪˈleɪʃn/", def: "Mối quan hệ" },
                    { word: "Support", ipa: "/səˈpɔːt/", def: "Hỗ trợ" }
                ], dialogue: [
                    { speaker: "Binh", gender: "male", text: "Vietnam has become an active member of many international organisations." },
                    { speaker: "Alice", gender: "female", text: "That's right. This helps promote regional peace and economic development." },
                    { speaker: "Binh", gender: "male", text: "It also creates more opportunities for cultural exchange and international investment." }
                ]},
                "unit-8": { title: "NEW WAYS TO LEARN", words: [
                    { word: "Access", ipa: "/ˈækses/", def: "Truy cập" },
                    { word: "Application", ipa: "/ˌæplɪˈkeɪʃn/", def: "Ứng dụng" },
                    { word: "Blended learning", ipa: "/ˈblendɪd ˈlɜːnɪŋ/", def: "Học tập kết hợp" },
                    { word: "Concentrate", ipa: "/ˈkɒnsntreɪt/", def: "Tập trung" },
                    { word: "Connection", ipa: "/kəˈnekʃn/", def: "Sự kết nối" },
                    { word: "Device", ipa: "/dɪˈvaɪs/", def: "Thiết bị" },
                    { word: "Digital", ipa: "/ˈdɪdʒɪtl/", def: "Kỹ thuật số" },
                    { word: "Distance learning", ipa: "/ˈdɪstəns ˈlɜːnɪŋ/", def: "Học từ xa" },
                    { word: "Effective", ipa: "/ɪˈfektɪv/", def: "Hiệu quả" },
                    { word: "Face-to-face", ipa: "/ˌfeɪs tə ˈfeɪs/", def: "Trực tiếp" },
                    { word: "Flexible", ipa: "/ˈfleksəbl/", def: "Linh hoạt" },
                    { word: "Information", ipa: "/ˌɪnfəˈmeɪʃn/", def: "Thông tin" },
                    { word: "Interaction", ipa: "/ˌɪntərˈækʃn/", def: "Sự tương tác" },
                    { word: "Internet", ipa: "/ˈɪntənet/", def: "Mạng internet" },
                    { word: "Knowledge", ipa: "/ˈnɒlɪdʒ/", def: "Kiến thức" },
                    { word: "Material", ipa: "/məˈtɪəriəl/", def: "Tài liệu" },
                    { word: "Online", ipa: "/ˌɒnˈlaɪn/", def: "Trực tuyến" },
                    { word: "Opportunity", ipa: "/ˌɒpəˈtjuːnəti/", def: "Cơ hội" },
                    { word: "Project", ipa: "/ˈprɒdʒekt/", def: "Dự án" },
                    { word: "Resource", ipa: "/rɪˈsɔːs/", def: "Tài nguyên" }
                ], dialogue: [
                    { speaker: "Lien", gender: "female", text: "Do you prefer face-to-face learning or distance learning?" },
                    { speaker: "Mark", gender: "male", text: "I like blended learning because it's flexible and uses many digital resources." },
                    { speaker: "Lien", gender: "female", text: "I agree. Online applications help us access information and learn at our own pace." }
                ]},
                "unit-9": { title: "PROTECTING THE ENVIRONMENT", words: [
                    { word: "Climate change", ipa: "/ˈklaɪmət tʃeɪndʒ/", def: "Biến đổi khí hậu" },
                    { word: "Conservation", ipa: "/ˌpɒnsəˈveɪʃn/", def: "Bảo tồn" },
                    { word: "Damage", ipa: "/ˈdæmɪdʒ/", def: "Làm hỏng" },
                    { word: "Endangered", ipa: "/ɪnˈdeɪndʒəd/", def: "Nguy cấp" },
                    { word: "Environment", ipa: "/ɪnˈvaɪrənmənt/", def: "Môi trường" },
                    { word: "Extinct", ipa: "/ɪkˈstɪŋkt/", def: "Tuyệt chủng" },
                    { word: "Global warming", ipa: "/ˌɡləʊbl ˈwɔːmɪŋ/", def: "Nóng lên toàn cầu" },
                    { word: "Habitat", ipa: "/ˈhæbɪtæt/", def: "Môi trường sống" },
                    { word: "Impact", ipa: "/ˈimpækt/", def: "Tác động" },
                    { word: "Issue", ipa: "/ˈɪʃuː/", def: "Vấn đề" },
                    { word: "Natural", ipa: "/ˈnætʃrəl/", def: "Tự nhiên" },
                    { word: "Nature", ipa: "/ˈneɪtʃə(r)/", def: "Thiên nhiên" },
                    { word: "Pollution", ipa: "/pəˈluːʃn/", def: "Ô nhiễm" },
                    { word: "Protect", ipa: "/pəˈtekt/", def: "Bảo vệ" },
                    { word: "Recycle", ipa: "/ˌriːˈsaɪkl/", def: "Tái chế" },
                    { word: "Resource", ipa: "/rɪˈsɔːs/", def: "Tài nguyên" },
                    { word: "Species", ipa: "/ˈspiːʃiːz/", def: "Loài" },
                    { word: "Sustainable", ipa: "/səˈsteɪnəbl/", def: "Bền vững" }
                ], dialogue: [
                    { speaker: "Nga", gender: "female", text: "Climate change is causing serious damage to many natural habitats." },
                    { speaker: "James", gender: "male", text: "We must protect endangered species before they become extinct." },
                    { speaker: "Nga", gender: "female", text: "Recycling and using sustainable resources are great ways to help the environment." }
                ]},
                "unit-10": { title: "ECOTOURISM", words: [
                    { word: "Adventure", ipa: "/ədˈventʃə(r)/", def: "Cuộc phiêu lưu" },
                    { word: "Awareness", ipa: "/əˈweənəs/", def: "Nhận thức" },
                    { word: "Benefit", ipa: "/ˈbenɪfɪt/", def: "Lợi ích" },
                    { word: "Culture", ipa: "/ˈkʌltʃə(r)/", def: "Văn hóa" },
                    { word: "Destination", ipa: "/ˌdestɪˈneɪʃn/", def: "Điểm đến" },
                    { word: "Ecology", ipa: "/iˈkɒlədʒi/", def: "Sinh thái học" },
                    { word: "Ecotourism", ipa: "/ˈiːkəʊtʊərɪzəm/", def: "Du lịch sinh thái" },
                    { word: "Environment", ipa: "/ɪnˈvaɪrənmənt/", def: "Môi trường" },
                    { word: "Impact", ipa: "/ˈimpækt/", def: "Tác động" },
                    { word: "Local", ipa: "/ˈləʊkl/", def: "Địa phương" },
                    { word: "Natural", ipa: "/ˈnætʃrəl/", def: "Tự nhiên" },
                    { word: "Protect", ipa: "/pəˈtekt/", def: "Bảo vệ" },
                    { word: "Responsible", ipa: "/rɪˈspɒnsəbl/", def: "Có trách nhiệm" },
                    { word: "Sustainable", ipa: "/səˈsteɪnəbl/", def: "Bền vững" },
                    { word: "Tour guide", ipa: "/tʊə ɡaɪd/", def: "Hướng dẫn viên du lịch" },
                    { word: "Tourist", ipa: "/ˈtʊərɪst/", def: "Khách du lịch" },
                    { word: "Traditional", ipa: "/trəˈdɪʃənl/", def: "Truyền thống" },
                    { word: "Wildlife", ipa: "/ˈwaɪldlaɪf/", def: "Động vật hoang dã" }
                ], dialogue: [
                    { speaker: "Minh", gender: "male", text: "Ecotourism helps tourists learn about wildlife and local cultures." },
                    { speaker: "Sara", gender: "female", text: "Yes, and it also brings many benefits to the local environment and economy." },
                    { speaker: "Minh", gender: "male", text: "We should be responsible travelers to ensure sustainable development for these destinations." }
                ]}
            },
            "11": {
                "unit-1": { title: "A LONG AND HEALTHY LIFE", words: [
                    { word: "Antibiotic", ipa: "/ˌæntibaɪˈɒtɪk/", def: "thuốc kháng sinh" },
                    { word: "Bacteria", ipa: "/bækˈtɪəriə/", def: "vi khuẩn" },
                    { word: "Balanced diet", ipa: "/ˌbælənst ˈdaɪət/", def: "chế độ ăn cân bằng" },
                    { word: "Cut down on", ipa: "/kʌt daʊn ɒn/", def: "cắt giảm" },
                    { word: "Disease", ipa: "/dɪˈziːz/", def: "bệnh tật" },
                    { word: "Examination", ipa: "/ɪɡˌzæmɪˈneɪʃn/", def: "sự thăm khám, kiểm tra" },
                    { word: "Fitness", ipa: "/ˈfɪtnəs/", def: "sự sung sức, khỏe mạnh" },
                    { word: "Immune system", ipa: "/ɪˈmjuːn ˌsɪstəm/", def: "hệ miễn dịch" },
                    { word: "Life expectancy", ipa: "/ˈlaɪf ɪkspektənsi/", def: "tuổi thọ" },
                    { word: "Muscle", ipa: "/ˈmʌsl/", def: "cơ bắp" },
                    { word: "Nutrient", ipa: "/ˈnjuːtriənt/", def: "chất dinh dưỡng" },
                    { word: "Organism", ipa: "/ˈɔːɡənɪzəm/", def: "sinh vật" },
                    { word: "Resistance", ipa: "/rɪˈzɪstəns/", def: "sức đề kháng" },
                    { word: "Treatment", ipa: "/ˈtriːtmənt/", def: "sự điều trị" },
                    { word: "Workout", ipa: "/ˈwɜːkaʊt/", def: "buổi tập thể dục" }
                ], dialogue: [
                    { speaker: "Dr. Green", gender: "male", text: "To improve your life expectancy, you should maintain a balanced diet." },
                    { speaker: "Nam", gender: "male", text: "I also do regular workouts to strengthen my muscles and fitness." },
                    { speaker: "Dr. Green", gender: "male", text: "Good. That will also boost your immune system against diseases." }
                ]},
                "unit-2": { title: "THE GENERATION GAP", words: [
                    { word: "Afford", ipa: "/əˈfɔːrd/", def: "có đủ khả năng chi trả" },
                    { word: "Characteristic", ipa: "/ˌkærəktəˈrɪstɪk/", def: "đặc điểm" },
                    { word: "Conflict", ipa: "/ˈkɒnflɪkt/", def: "xung đột" },
                    { word: "Curfew", ipa: "/ˈkɜːrfjuː/", def: "giờ giới nghiêm" },
                    { word: "Experienced", ipa: "/ɪkˈspɪəriənst/", def: "có kinh nghiệm" },
                    { word: "Extended family", ipa: "/ɪkˌstendɪd ˈfæməli/", def: "gia đình đa thế hệ" },
                    { word: "Generation gap", ipa: "/ˌdʒenəˈreɪʃn ɡæp/", def: "khoảng cách thế hệ" },
                    { word: "Hire", ipa: "/ˈhaɪər/", def: "thuê" },
                    { word: "Nuclear family", ipa: "/ˌnuːkliər ˈfæməli/", def: "gia đình hạt nhân" },
                    { word: "Obey", ipa: "/əˈbeɪ/", def: "vâng lời" },
                    { word: "Overprotective", ipa: "/ˌəʊvərprəˈtektɪv/", def: "bảo vệ quá mức" },
                    { word: "Privacy", ipa: "/ˈpraɪvəsi/", def: "sự riêng tư" },
                    { word: "Respect", ipa: "/rɪˈspekt/", def: "tôn trọng" },
                    { word: "Role model", ipa: "/ˈrəʊl mɒdl/", def: "hình mẫu lý tưởng" },
                    { word: "Table manners", ipa: "/ˈteɪbl ˈmænərz/", def: "quy tắc bàn ăn" },
                    { word: "Viewpoint", ipa: "/ˈvjuːpɔɪnt/", def: "quan điểm" }
                ], dialogue: [
                    { speaker: "Grandpa", gender: "male", text: "Young people today often ignore table manners and traditional values." },
                    { speaker: "Tuan", gender: "male", text: "I think it's just a different viewpoint, Grandpa. We still respect you." },
                    { speaker: "Grandpa", gender: "male", text: "We need to talk more to bridge this generation gap in our extended family." }
                ]},
                "unit-3": { title: "CITIES OF THE FUTURE", words: [
                    { word: "Carbon neutral", ipa: "/ˌkɑːrbən ˈnuːtrəl/", def: "trung hòa carbon" },
                    { word: "City dweller", ipa: "/ˈsɪti ˈdwelər/", def: "cư dân thành phố" },
                    { word: "Infrastructure", ipa: "/ˈɪnfrəstrʌktʃər/", def: "cơ sở hạ tầng" },
                    { word: "Liveable", ipa: "/ˈlɪvəbl/", def: "đáng sống" },
                    { word: "Overcrowded", ipa: "/ˌəʊvəˈkraʊdɪd/", def: "quá đông đúc" },
                    { word: "Pollution", ipa: "/pəˈluːʃn/", def: "ô nhiễm" },
                    { word: "Public transport", ipa: "/ˈpʌblɪk ˈtrænspɔːrt/", def: "phương tiện công cộng" },
                    { word: "Renewable energy", ipa: "/rɪˈnjuːəbl ˈenədʒi/", def: "năng lượng tái tạo" },
                    { word: "Skyscraper", ipa: "/ˈskaɪskreɪpər/", def: "tòa nhà chọc trời" },
                    { word: "Smart city", ipa: "/smɑːrt ˈsɪti/", def: "thành phố thông minh" },
                    { word: "Sustainable", ipa: "/səˈsteɪnəbl/", def: "bền vững" },
                    { word: "Urban", ipa: "/ˈɜːrbən/", def: "thuộc về đô thị" }
                ], dialogue: [
                    { speaker: "Engineer", gender: "male", text: "Future smart cities will use renewable energy to become carbon neutral." },
                    { speaker: "Mayor", gender: "female", text: "Modern infrastructure will make our urban areas more liveable for city dwellers." },
                    { speaker: "Engineer", gender: "male", text: "And efficient public transport will solve the problem of overcrowded streets." }
                ]},
                "unit-4": { title: "ASEAN AND VIET NAM", words: [
                    { word: "Association", ipa: "/əˌsəʊʃiˈeɪʃn/", def: "hiệp hội" },
                    { word: "Commitment", ipa: "/kəˈmɪtmənt/", def: "sự cam kết" },
                    { word: "Contribution", ipa: "/ˌkɒntrɪˈbjuːʃn/", def: "sự đóng góp" },
                    { word: "Cooperation", ipa: "/kəʊˌɒpəˈreɪʃn/", def: "sự hợp tác" },
                    { word: "External", ipa: "/ɪkˈstɜːrnl/", def: "bên ngoài" },
                    { word: "Identify", ipa: "/aɪˈdentɪfaɪ/", def: "nhận dạng" },
                    { word: "Interfere", ipa: "/ˌɪntəˈfɪə(r)/", def: "can thiệp" },
                    { word: "Maintain", ipa: "/meɪnˈteɪn/", def: "duy trì" },
                    { word: "Member state", ipa: "/ˈmembər steɪt/", def: "quốc gia thành viên" },
                    { word: "Participation", ipa: "/pɑrˌtɪsɪˈpeɪʃn/", def: "sự tham gia" },
                    { word: "Principle", ipa: "/ˈprɪnsəpl/", def: "nguyên tắc" },
                    { word: "Regional", ipa: "/ˈriːdʒənl/", def: "thuộc khu vực" },
                    { word: "Stability", ipa: "/stəˈbɪləti/", def: "sự ổn định" },
                    { word: "Unity", ipa: "/ˈjuːnəti/", def: "sự thống nhất" }
                ], dialogue: [
                    { speaker: "Lan", gender: "female", text: "ASEAN member states always follow the principle of non-interference." },
                    { speaker: "John", gender: "male", text: "That helps maintain regional stability and unity among the countries." },
                    { speaker: "Lan", gender: "female", text: "Vietnam's participation and commitment have made a great contribution to the association." }
                ]},
                "unit-5": { title: "GLOBAL WARMING", words: [
                    { word: "Atmosphere", ipa: "/ˈætməsfɪər/", def: "bầu khí quyển" },
                    { word: "Carbon footprint", ipa: "/ˌkɑːrbən ˈfʊtprɪnt/", def: "dấu chân carbon" },
                    { word: "Climate change", ipa: "/ˈklaɪmət tʃeɪndʒ/", def: "biến đổi khí hậu" },
                    { word: "Deforestation", ipa: "/ˌdiːˌfɒrɪˈsteɪʃn/", def: "nạn phá rừng" },
                    { word: "Emission", ipa: "/iˈmɪʃn/", def: "sự phát thải" },
                    { word: "Fossil fuel", ipa: "/ˈfɒsl ˈfjuːəl/", def: "nhiên liệu hóa thạch" },
                    { word: "Global warming", ipa: "/ˌɡləʊbl ˈwɔːmɪŋ/", def: "sự nóng lên toàn cầu" },
                    { word: "Greenhouse effect", ipa: "/ˈɡriːnhaʊs ɪˈfekt/", def: "hiệu ứng nhà kính" },
                    { word: "Heatwave", ipa: "/ˈhiːtweɪv/", def: "đợt nắng nóng" },
                    { word: "Impact", ipa: "/ˈɪmpækt/", def: "tác động" },
                    { word: "Methane", ipa: "/ˈmiːθeɪn/", def: "khí mê-tan" },
                    { word: "Preserve", ipa: "/prɪˈzɜːrv/", def: "bảo tồn" },
                    { word: "Release", ipa: "/rɪˈliːs/", def: "phóng thích, thải ra" }
                ], dialogue: [
                    { speaker: "Scientist", gender: "male", text: "Burning fossil fuels releases massive CO2 emissions into the atmosphere." },
                    { speaker: "Reporter", gender: "female", text: "Is that why the greenhouse effect is causing global warming?" },
                    { speaker: "Scientist", gender: "male", text: "Yes, it leads to severe climate change and more frequent heatwaves." }
                ]},
                "unit-6": { title: "PRESERVING HERITAGE", words: [
                    { word: "Appreciate", ipa: "/əˈpriːʃieɪt/", def: "trân trọng" },
                    { word: "Cultural heritage", ipa: "/ˈkʌltʃərəl ˈherɪtɪdʒ/", def: "di sản văn hóa" },
                    { word: "Historic", ipa: "/hɪˈstɒrɪk/", def: "mang tính lịch sử" },
                    { word: "Landscape", ipa: "/ˈlændskeɪp/", def: "phong cảnh" },
                    { word: "Monument", ipa: "/ˈmɒnju mnt/", def: "đài tưởng niệm" },
                    { word: "Preservation", ipa: "/ˌprezəˈveɪʃn/", def: "sự bảo tồn" },
                    { word: "Promote", ipa: "/prəˈməʊt/", def: "thúc đẩy" },
                    { word: "Restore", ipa: "/rɪˈstɔː(r)/", def: "khôi phục" },
                    { word: "Site", ipa: "/saɪt/", def: "địa điểm" },
                    { word: "Structure", ipa: "/ˈstrʌktʃə(r)/", def: "cấu trúc" },
                    { word: "Tradition", ipa: "/trəˈdɪʃn/", def: "truyền thống" },
                    { word: "Unique", ipa: "/juˈniːk/", def: "độc nhất" }
                ], dialogue: [
                    { speaker: "Guide", gender: "female", text: "We need to restore these historic structures to preserve our heritage." },
                    { speaker: "Tourist", gender: "male", text: "I really appreciate the unique architecture of this ancient site." },
                    { speaker: "Guide", gender: "female", text: "Our mission is to promote and protect these cultural values for the future." }
                ]},
                "unit-7": { title: "EDUCATION OPTIONS FOR SCHOOL-LEAVERS", words: [
                    { word: "Academic", ipa: "/ˌækəˈdemɪk/", def: "thuộc về học thuật" },
                    { word: "Admission", ipa: "/ədˈmɪʃn/", def: "sự nhận vào học" },
                    { word: "Apprenticeship", ipa: "/əˈprentɪʃɪp/", def: "thời gian học việc" },
                    { word: "Certificate", ipa: "/səˈtɪfɪkət/", def: "chứng chỉ" },
                    { word: "College", ipa: "/ˈkɒlɪdʒ/", def: "trường cao đẳng" },
                    { word: "Course", ipa: "/kɔːrs/", def: "khóa học" },
                    { word: "Degree", ipa: "/dɪˈɡriː/", def: "bằng cấp (đại học)" },
                    { word: "Educational", ipa: "/ˌedʒuˈkeɪʃənl/", def: "thuộc giáo dục" },
                    { word: "Higher education", ipa: "/ˌhaɪər ˌedʒuˈkeɪʃn/", def: "giáo dục đại học" },
                    { word: "Institution", ipa: "/ˌɪnstɪˈtjuːʃn/", def: "cơ sở, tổ chức" },
                    { word: "Qualification", ipa: "/ˌkwɒlɪfɪˈkeɪʃn/", def: "văn bằng, trình độ" },
                    { word: "Vocational", ipa: "/vəʊˈkeɪʃənl/", def: "thuộc về nghề nghiệp" }
                ], dialogue: [
                    { speaker: "Advisor", gender: "female", text: "After finishing school, you can choose higher education or vocational training." },
                    { speaker: "Student", gender: "male", text: "I'm interested in an apprenticeship to gain practical skills." },
                    { speaker: "Advisor", gender: "female", text: "That's a good choice. You can still get a professional certificate later." }
                ]},
                "unit-8": { title: "BECOMING INDEPENDENT", words: [
                    { word: "Confident", ipa: "/ˈkɒnfɪdənt/", def: "tự tin" },
                    { word: "Decision-making", ipa: "/dɪˈsɪʒn ˈmeɪkɪŋ/", def: "kỹ năng đưa ra quyết định" },
                    { word: "Independence", ipa: "/ˌɪndɪˈpendəns/", def: "sự độc lập" },
                    { word: "Motivation", ipa: "/ˌməʊtɪˈveɪʃn/", def: "động lực" },
                    { word: "Organise", ipa: "/ˈɔːrɡənaɪz/", def: "tổ chức" },
                    { word: "Perseverance", ipa: "/ˌpɜːrsəˈvɪərəns/", def: "sự kiên trì" },
                    { word: "Reliable", ipa: "/rɪˈlaɪəbl/", def: "đáng tin cậy" },
                    { word: "Self-discipline", ipa: "/ˌself ˈdɪsəplɪn/", def: "kỷ luật tự giác" },
                    { word: "Self-esteem", ipa: "/ˌself ɪˈstiːm/", def: "lòng tự trọng" },
                    { word: "Time management", ipa: "/ˈtaɪm ˌmænɪdʒmənt/", def: "quản lý thời gian" }
                ], dialogue: [
                    { speaker: "Teacher", gender: "female", text: "Independence requires strong self-discipline and time management skills." },
                    { speaker: "Linh", gender: "female", text: "I'm trying to improve my decision-making skills to be more confident." },
                    { speaker: "Teacher", gender: "female", text: "Perseverance is key. Don't give up when you face difficult tasks." }
                ]},
                "unit-9": { title: "SOCIAL ISSUES", words: [
                    { word: "Alcoholism", ipa: "/ˈælkəhɒlɪzəm/", def: "chứng nghiện rượu" },
                    { word: "Bullying", ipa: "/ˈbʊliɪŋ/", def: "sự bắt nạt" },
                    { word: "Crime", ipa: "/kraɪm/", def: "tội phạm" },
                    { word: "Cyberbullying", ipa: "/ˈsaɪbərbʊliɪŋ/", def: "bắt nạt qua mạng" },
                    { word: "Discrimination", ipa: "/dɪˌskrɪmɪˈneɪʃn/", def: "sự phân biệt đối xử" },
                    { word: "Domestic violence", ipa: "/dəˌmestɪk ˈvaɪələns/", def: "bạo lực gia đình" },
                    { word: "Drug abuse", ipa: "/ˈʌɡ əbjuːs/", def: "lạm dụng ma túy" },
                    { word: "Overpopulation", ipa: "/ˌəʊvəˌpɒpjuˈleɪʃn/", def: "bùng nổ dân số" },
                    { word: "Poverty", ipa: "/ˈpɒvəti/", def: "sự nghèo đói" },
                    { word: "Racism", ipa: "/ˈreɪsɪzəm/", def: "sự phân biệt chủng tộc" },
                    { word: "Social issue", ipa: "/ˌsəʊʃl ˈɪʃu/", def: "vấn đề xã hội" }
                ], dialogue: [
                    { speaker: "Officer", gender: "male", text: "Cyberbullying is a serious social issue that affects many teenagers." },
                    { speaker: "Student", gender: "female", text: "What can we do to stop this kind of discrimination and crime?" },
                    { speaker: "Officer", gender: "male", text: "Report any bad behavior and support the victims immediately." }
                ]},
                "unit-10": { title: "THE ECOSYSTEM", words: [
                    { word: "Biodiversity", ipa: "/ˌbaɪəʊdaɪˈvɜːrsəti/", def: "đa dạng sinh học" },
                    { word: "Conservation", ipa: "/ˌkɒnsəˈveɪʃn/", def: "sự bảo tồn" },
                    { word: "Ecosystem", ipa: "/ˈiːkəʊsɪstəm/", def: "hệ sinh thái" },
                    { word: "Endangered species", ipa: "/ɪnˈdeɪndʒəd ˈspiːʃiːz/", def: "loài nguy cấp" },
                    { word: "Environmental", ipa: "/ɪnˌvaɪrənˈmentl/", def: "thuộc về môi trường" },
                    { word: "Habitat", ipa: "/ˈhæbɪtæt/", def: "môi trường sống" },
                    { word: "Pollutant", ipa: "/pəˈluːtənt/", def: "chất gây ô nhiễm" },
                    { word: "Protection", ipa: "/prəˈtekʃn/", def: "sự bảo vệ" },
                    { word: "Restoration", ipa: "/ˌrestəˈreɪʃn/", def: "sự phục hồi" },
                    { word: "Threaten", ipa: "/ˈθretn/", def: "đe dọa" },
                    { word: "Well-being", ipa: "/ˈwel biːɪŋ/", def: "sự hạnh phúc, khỏe mạnh" }
                ], dialogue: [
                    { speaker: "Biologist", gender: "male", text: "The loss of biodiversity will threaten the balance of our ecosystem." },
                    { speaker: "Student", gender: "male", text: "How do pollutants affect the natural habitat of animals?" },
                    { speaker: "Biologist", gender: "male", text: "They destroy the food chain and harm the well-being of all living things." }
                ]}
            },
            "12": {
                "unit-1": { title: "LIFE STORIES WE ADMIRE", words: [
                    { word: "account", ipa: "/əˈkaʊnt/", def: "câu chuyện" },
                    { word: "achievement", ipa: "/əˈʧiːvmənt/", def: "thành tích, thành tựu" },
                    { word: "admire", ipa: "/ədˈmaɪə/", def: "ngưỡng mộ" },
                    { word: "adopt", ipa: "/əˈdɒpt/", def: "nhận con nuôi" },
                    { word: "animated", ipa: "/ˈænɪmeɪtɪd/", def: "hoạt hình" },
                    { word: "attack", ipa: "/əˈtæk/", def: "cuộc tấn công, tấn công" },
                    { word: "attend", ipa: "/əˈtend/", def: "đi học" },
                    { word: "battle", ipa: "/ˈbætl/", def: "chiến trường" },
                    { word: "biography", ipa: "/baɪˈɒɡrəfi/", def: "tiểu sử" },
                    { word: "biological", ipa: "/ˌbaɪəˈlɒdʒɪkl/", def: "(quan hệ) ruột thịt" },
                    { word: "bond", ipa: "/bɒnd/", def: "kết thân (với ai)" },
                    { word: "cancer", ipa: "/ˈkænsə/", def: "ung thư" },
                    { word: "carry out", ipa: "/ˈkæri aʊt/", def: "tiến hành" },
                    { word: "childhood", ipa: "/ˈʧaɪldhʊd/", def: "tuổi thơ" },
                    { word: "death", ipa: "/deθ/", def: "cái chết" },
                    { word: "defeat", ipa: "/dɪˈf iːt/", def: " đánh bại" },
                    { word: "devote to", ipa: "/dɪˈvəʊt tə/", def: "cống hiến (cho)" },
                    { word: "drop out (of)", ipa: "/ˈdrɒp aʊt (ɒv)/", def: "bỏ học" },
                    { word: "enemy", ipa: "/ˈenəmi/", def: "kẻ thù" },
                    { word: "genius", ipa: "/ˈʤiːniəs/", def: "tiền tài" },
                    { word: "hero", ipa: "/ˈhɪərəʊ/", def: "anh hùng" },
                    { word: "marriage", ipa: "/ˈmærɪʤ/", def: "cuộc hôn nhân" },
                    { word: "military", ipa: "/ˈmɪlətri/", def: "quân đội" },
                    { word: "pass away", ipa: "/pɑːs əˈweɪ/", def: "qua đời" },
                    { word: "poem", ipa: "/ˈpəʊɪm/", def: "bài thơ" },
                    { word: "poetry", ipa: "/'pəʊətri/", def: "thơ ca" },
                    { word: "resign", ipa: "/rɪˈzaɪn/", def: "từ chức" },
                    { word: "rule", ipa: "/ruːl/", def: "sự trị vì, trị vì" },
                    { word: "youth", ipa: "/juːθ/", def: "tuổi trẻ" }
                ], dialogue: [
                    { speaker: "Ba", gender: "male", text: "I really admire General Vo Nguyen Giap for his great achievements in the military." },
                    { speaker: "Nga", gender: "female", text: "Yes, his biography is very inspiring. He devoted his life to our country." },
                    { speaker: "Ba", gender: "male", text: "He will always be a hero in the hearts of Vietnamese people." }
                ]},
                "unit-2": { title: "A MULTICULTURAL WORLD", words: [
                    { word: "Admire", ipa: "/ədˈmaɪə/", def: "ngắm nhìn, chiêm ngưỡng" },
                    { word: "Anxiety", ipa: "/æŋˈzaɪəti/", def: "sự bồn chồn, lo lắng" },
                    { word: "Appreciate", ipa: "/əˈpriːʃieɪt/", def: "thưởng thức, trân trọng" },
                    { word: "Bamboo dancing", ipa: "/ˌbæmˈbuː ˈdɑːnsɪŋ/", def: "nhảy sạp" },
                    { word: "Captivate", ipa: "/ˈkæptɪveɪt/", def: "thu hút, cuốn hút" },
                    { word: "Celebrate", ipa: "/ˈselɪbreɪt/", def: "tổ chức, mừng" },
                    { word: "Confusion", ipa: "/kənˈfjuːʒn/", def: "sự khó hiểu, sự hỗn độn" },
                    { word: "Costume", ipa: "/ˈkɒstjuːm/", def: "trang phục" },
                    { word: "Cuisine", ipa: "/kwɪˈziːn/", def: "ẩm thực" },
                    { word: "Cultural", ipa: "/ˈkʌltʃərəl/", def: "thuộc về văn hoá" },
                    { word: "Culture shock", ipa: "/ˈkʌltʃə ʃɒk/", def: "sốc văn hoá" },
                    { word: "Custom", ipa: "/ˈkʌstəm/", def: "phong tục" },
                    { word: "Diversity", ipa: "/daɪˈvɜːsəti/", def: "sự đa dạng" },
                    { word: "Extracurricular", ipa: "/ˌekstrəkəˈrɪkjələ/", def: "ngoại khoá" },
                    { word: "Festivity", ipa: "/feˈstɪvəti/", def: "ngày hội" },
                    { word: "Globalisation", ipa: "/ˌɡləʊbəlaɪˈzeɪʃn/", def: "sự toàn cầu hoá" },
                    { word: "Identity", ipa: "/aɪˈdentəti/", def: "bản sắc, đặc điểm nhận dạng" },
                    { word: "Keep up with", ipa: "/ˈkiːp ʌp wɪð/", def: "bắt kịp với, theo kịp" },
                    { word: "Lifestyle", ipa: "/ˈlaɪfstaɪl/", def: "lối sống" },
                    { word: "Multicultural", ipa: "/ˌmʌltiˈkʌltʃərəl/", def: "tính đa văn hoá" },
                    { word: "Origin", ipa: "/ˈɒrɪdʒɪn/", def: "nguồn gốc" },
                    { word: "Popularity", ipa: "/ˌpɒpjuˈlærəti/", def: "sự phổ biến, sự thông dụng" },
                    { word: "Speciality", ipa: "/ˌspeʃiˈæləti/", def: "đặc sản" },
                    { word: "Staple", ipa: "/ˈspeɪpl/", def: "cơ bản, chủ yếu" },
                    { word: "Tasty", ipa: "/ˈteɪsti/", def: "ngon" },
                    { word: "Traditional", ipa: "/trəˈdɪʃənl/", def: "truyền thống" },
                    { word: "Trend", ipa: "/trend/", def: "xu hướng" }
                ], dialogue: [
                    { speaker: "Sophie", gender: "female", text: "When I first came to Vietnam, I experienced a bit of culture shock." },
                    { speaker: "Minh", gender: "male", text: "I understand. But now you seem to appreciate our traditional cuisine and customs." },
                    { speaker: "Sophie", gender: "female", text: "Yes, the cultural diversity here is amazing and captivates me every day." }
                ]},
                "unit-3": { title: "GREEN LIVING", words: [
                    { word: "Carbon footprint", ipa: "/ˌkɑːbən ˈfʊtprɪnt/", def: "tổng lượng phát thải khí nhà kính" },
                    { word: "Cardboard", ipa: "/ˈkɑːdbɔːd/", def: "bìa cứng" },
                    { word: "Clean up", ipa: "/ˈkliːn ʌp/", def: "dọn dẹp" },
                    { word: "Compost", ipa: "/ˈkɒmpɒst/", def: "phân hữu cơ" },
                    { word: "Container", ipa: "/kənˈteɪnə/", def: "thùng, hộp, gói" },
                    { word: "Contaminated", ipa: "/kənˈtæmɪneɪtɪd/", def: "nhiễm độc, ô nhiễm" },
                    { word: "Decompose", ipa: "/ˌdiːkəmˈpəʊz/", def: "phân huỷ" },
                    { word: "Eco-friendly", ipa: "/ˌiːkəʊ ˈfrendli/", def: "thân thiện với môi trường" },
                    { word: "Fruit peel", ipa: "/fruːt piːl/", def: "vỏ trái cây" },
                    { word: "Landfill", ipa: "/ˈlændfɪl/", def: "bãi rác" },
                    { word: "Leftover", ipa: "/ˈleftəʊvə/", def: "thức ăn thừa" },
                    { word: "Organic", ipa: "/ɔːˈɡænɪk/", def: "hữu cơ" },
                    { word: "Packaging", ipa: "/ˈpækɪʤɪŋ/", def: "bao bì" },
                    { word: "Pollute", ipa: "/pəˈluːt/", def: "gây ô nhiễm" },
                    { word: "Preserve", ipa: "/prɪˈzɜːv/", def: "bảo tồn, giữ gìn" },
                    { word: "Recycle", ipa: "/ˌriːˈsaɪkl/", def: "tái chế" },
                    { word: "Reusable", ipa: "/ˌriːˈjuːzəbl/", def: "có thể tái sử dụng" },
                    { word: "Single-use", ipa: "/ˌsɪŋɡl ˈjuːs/", def: "sử dụng một lần" },
                    { word: "Sort", ipa: "/sɔːt/", def: "phân loại" },
                    { word: "Sustainable", ipa: "/səˈsteɪnəbl/", def: "bền vững" }
                ], dialogue: [
                    { speaker: "Nam", gender: "male", text: "We should sort our rubbish and put organic waste like fruit peel into compost." },
                    { speaker: "Mai", gender: "female", text: "Right! That way we reduce the amount of waste sent to the landfill." },
                    { speaker: "Nam", gender: "male", text: "And remember to avoid single-use plastic and choose eco-friendly packaging instead." }
                ]},
                "unit-4": { title: "URBANISATION", words: [
                    { word: "Commuter", ipa: "/kəˈmjuːtə/", def: "người đi làm bằng phương tiện công cộng" },
                    { word: "Congestion", ipa: "/kənˈʤesʧən/", def: "sự tắc nghẽn" },
                    { word: "Cost of living", ipa: "/kɒst əv ˈlɪvɪŋ/", def: "chi phí sinh hoạt" },
                    { word: "Densely populated", ipa: "/ˈdensli ˈpɒpjʊleɪtɪd/", def: "dân cư đông đúc" },
                    { word: "Dwell", ipa: "/dwel/", def: "trú ngụ, ở" },
                    { word: "Employment", ipa: "/ɪmˈplɔɪmənt/", def: "việc làm" },
                    { word: "Expansion", ipa: "/ɪksˈpænʃən/", def: "sự mở rộng" },
                    { word: "Facilities", ipa: "/fəˈsɪlɪtiz/", def: "cơ sở vật chất" },
                    { word: "High-rise", ipa: "/ˈhaɪraɪz/", def: "cao tầng" },
                    { word: "Housing", ipa: "/ˈhaʊzɪŋ/", def: "nhà ở" },
                    { word: "Infrastructure", ipa: "/ˈɪnfrəˌstrʌkʧə/", def: "cơ sở hạ tầng" },
                    { word: "Inhabitant", ipa: "/ɪnˈhæbɪtənt/", def: "cư dân" },
                    { word: "Migrate", ipa: "/maɪˈɡreɪt/", def: "di cư" },
                    { word: "Overcrowding", ipa: "/ˌəʊvəˈkraʊdɪŋ/", def: "tình trạng quá tải dân số" },
                    { word: "Public transport", ipa: "/ˈpʌblɪk ˈtrænspɔːt/", def: "phương tiện công cộng" },
                    { word: "Rural", ipa: "/ˈrʊərəl/", def: "nông thôn" },
                    { word: "Slum", ipa: "/slʌm/", def: "khu ổ chuột" },
                    { word: "Urban", ipa: "/ˈɜːbən/", def: "đô thị" },
                    { word: "Urbanisation", ipa: "/ˌɜːbənaɪˈzeɪʃən/", def: "đô thị hóa" },
                    { word: "Wealthy", ipa: "/ˈwelθi/", def: "giàu có" }
                ], dialogue: [
                    { speaker: "Journalist", gender: "female", text: "The rapid urbanisation has led to overcrowding in many big cities." },
                    { speaker: "Official", gender: "male", text: "We are improving infrastructure and housing to support more inhabitants." },
                    { speaker: "Journalist", gender: "female", text: "But the high cost of living and traffic congestion are still major problems for commuters." }
                ]},
                "unit-5": { title: "THE WORLD OF WORK", words: [
                    { word: "Apprentice", ipa: "/əˈprentɪs/", def: "người học việc" },
                    { word: "Career path", ipa: "/kəˈrɪə pɑːθ/", def: "con đường sự nghiệp" },
                    { word: "Challenging", ipa: "/ˈʧælɪnʤɪŋ/", def: "đầy thử thách" },
                    { word: "Collaborate", ipa: "/kəˈlæbəreɪt/", def: "hợp tác" },
                    { word: "Colleague", ipa: "/ˈkɒliːɡ/", def: "đồng nghiệp" },
                    { word: "Deadline", ipa: "/ˈdedlaɪn/", def: "hạn chót" },
                    { word: "Experience", ipa: "/ɪksˈpɪərɪəns/", def: "kinh nghiệm" },
                    { word: "Flexible", ipa: "/ˈfleksəbl/", def: "linh hoạt" },
                    { word: "Full-time", ipa: "/fʊl taɪm/", def: "toàn thời gian" },
                    { word: "Interview", ipa: "/ˈɪntəvjuː/", def: "phỏng vấn" },
                    { word: "Job market", ipa: "/ʤɒb ˈmɑːkɪt/", def: "thị trường việc làm" },
                    { word: "Part-time", ipa: "/pɑːt taɪm/", def: "bán thời gian" },
                    { word: "Passion", ipa: "/ˈpæʃən/", def: "đam mê" },
                    { word: "Profession", ipa: "/prəˈfeʃən/", def: "ngề nghiệp" },
                    { word: "Promotion", ipa: "/prəˈməʊʃən/", def: "sự thăng tiến" },
                    { word: "Qualification", ipa: "/ˌkwɒlɪfɪˈkeʃən/", def: "bằng cấp" },
                    { word: "Salary", ipa: "/ˈsæləri/", def: "tiền lương" },
                    { word: "Skill", ipa: "/skɪl/", def: "kỹ năng" },
                    { word: "Vacant", ipa: "/ˈveɪkənt/", def: "còn trống" },
                    { word: "Workforce", ipa: "/ˈwɜːkfɔːs/", def: "lực lượng lao động" }
                ], dialogue: [
                    { speaker: "Employer", gender: "male", text: "We are looking for a candidate with good qualifications and experience." },
                    { speaker: "Applicant", gender: "female", text: "I have worked part-time and I am very flexible with my work schedule." },
                    { speaker: "Employer", gender: "male", text: "Great. Can you collaborate well with colleagues to meet tight deadlines?" }
                ]},
                "unit-6": { title: "ARTIFICIAL INTELLIGENCE", words: [
                    { word: "Algorithm", ipa: "/ˈælɡərɪðm/", def: "thuật toán" },
                    { word: "Artificial Intelligence", ipa: "/ˌɑːtɪfɪʃl ɪnˈtelɪʤəns/", def: "trí tuệ nhân tạo" },
                    { word: "Automation", ipa: "/ˌɔːtəˈmeɪʃən/", def: "tự động hóa" },
                    { word: "Big data", ipa: "/bɪɡ ˈdeɪtə/", def: "dữ liệu lớn" },
                    { word: "Bot", ipa: "/bɒt/", def: "rô-bốt" },
                    { word: "Chatbot", ipa: "/ˈʧætbɒt/", def: "phần mềm trò chuyện" },
                    { word: "Cloud computing", ipa: "/klaʊd kəmˈpjuːtɪŋ/", def: "điện toán đám mây" },
                    { word: "Data analysis", ipa: "/ˈdeɪtə əˈnæləsɪs/", def: "phân tích dữ liệu" },
                    { word: "Deep learning", ipa: "/diːp ˈlɜːnɪŋ/", def: "học sâu" },
                    { word: "Device", ipa: "/dɪˈvaɪs/", def: "thiết bị" },
                    { word: "Efficiency", ipa: "/ɪˈfɪʃənsi/", def: "hiệu suất" },
                    { word: "Gadget", ipa: "/ˈɡæʤɪt/", def: "thiết bị nhỏ" },
                    { word: "Innovation", ipa: "/ˌɪnəˈveɪʃən/", def: "sự đổi mới" },
                    { word: "Internet of Things", ipa: "/ˈɪntənet əv θɪŋz/", def: "vạn vật kết nối" },
                    { word: "Machine learning", ipa: "/məˈʃiːn ˈlɜːnɪŋ/", def: "học máy" },
                    { word: "Robot", ipa: "/ˈrəʊbɒt/", def: "người máy" },
                    { word: "Software", ipa: "/ˈsɒftweə/", def: "phần mềm" },
                    { word: "Supercomputer", ipa: "/ˈsuːpəkəmˈpjuːtə/", def: "siêu máy tính" },
                    { word: "Tech-savvy", ipa: "/tek ˈsævi/", def: "am hiểu công nghệ" },
                    { word: "Virtual reality", ipa: "/ˈvɜːʧʊəl riˈæləti/", def: "thực tế ảo" }
                ], dialogue: [
                    { speaker: "Techie", gender: "male", text: "The new algorithm uses deep learning to improve efficiency." },
                    { speaker: "User", gender: "female", text: "Will artificial intelligence and automation replace human jobs?" },
                    { speaker: "Techie", gender: "male", text: "AI will likely assist humans rather than replace them, making our gadgets smarter." }
                ]},
                "unit-7": { title: "THE WORLD AROUND US", words: [
                    { word: "Biodiversity", ipa: "/ˌbaɪəʊdaɪˈvɜːsəti/", def: "đa dạng sinh học" },
                    { word: "Climate", ipa: "/ˈklaɪmət/", def: "khí hậu" },
                    { word: "Conservation", ipa: "/ˌkɒnsəˈveɪʃən/", def: "sự bảo tồn" },
                    { word: "Ecosystem", ipa: "/ˈiːkəʊˌsɪstəm/", def: "hệ sinh thái" },
                    { word: "Endangered species", ipa: "/ɪnˈdeɪnʤəd ˈspiːʃiːz/", def: "loài có nguy cơ tuyệt chủng" },
                    { word: "Environment", ipa: "/ɪnˈvaɪərənmənt/", def: "môi trường" },
                    { word: "Exploitation", ipa: "/ˌeksplɔɪˈteɪʃən/", def: "sự khai thác" },
                    { word: "Habitat", ipa: "/ˈhæbɪtæt/", def: "môi trường sống" },
                    { word: "Impact", ipa: "/ˈɪmpækt/", def: "tác động" },
                    { word: "Nature reserve", ipa: "/ˈneɪʧə rɪˈzɜːv/", def: "khu bảo tồn thiên nhiên" },
                    { word: "Pollution", ipa: "/pəˈluːʃən/", def: "ô nhiễm" },
                    { word: "Preserve", ipa: "/prɪˈzɜːv/", def: "giữ gìn" },
                    { word: "Protect", ipa: "/prəˈtekt/", def: "bảo vệ" },
                    { word: "Rare", ipa: "/reə/", def: "hiếm" },
                    { word: "Resource", ipa: "/rɪˈsɔːs/", def: "tài nguyên" },
                    { word: "Species", ipa: "/ˈspiːʃiːz/", def: "loài" },
                    { word: "Sustainability", ipa: "/səsˈteɪnəˈbɪlɪti/", def: "sự bền vững" },
                    { word: "Threaten", ipa: "/ˈθretn/", def: "đe dọa" },
                    { word: "Urbanization", ipa: "/ˌɜːbənaɪˈzeɪʃən/", def: "đô thị hóa" },
                    { word: "Wildlife", ipa: "/ˈwaɪldlaɪf/", def: "động vật hoang dã" }
                ], dialogue: [
                    { speaker: "Conservationist", gender: "male", text: "We must stop the exploitation of natural resources to protect wildlife." },
                    { speaker: "Student", gender: "female", text: "How can we increase the impact of our conservation efforts?" },
                    { speaker: "Conservationist", gender: "male", text: "By creating more nature reserves and preserving the natural habitat of rare species." }
                ]},
                "unit-8": { title: "HEALTH AND WELLNESS", words: [
                    { word: "Anxiety", ipa: "/æŋˈzaɪəti/", def: "lo lắng" },
                    { word: "Balanced diet", ipa: "/ˈbælənst ˈdaɪət/", def: "chế độ ăn cân bằng" },
                    { word: "Exercise", ipa: "/ˈeksəsaɪz/", def: "tập thể dục" },
                    { word: "Fitness", ipa: "/ˈfɪtnəs/", def: "sự sung sức" },
                    { word: "Health", ipa: "/helθ/", def: "sức khỏe" },
                    { word: "Hygiene", ipa: "/ˈhaɪʤiːn/", def: "vệ sinh" },
                    { word: "Illness", ipa: "/ˈɪlnəs/", def: "bệnh tật" },
                    { word: "Immune system", ipa: "/ɪˈmjuːn ˈsɪstəm/", def: "hệ miễn dịch" },
                    { word: "Insomnia", ipa: "/ɪnˈsɒmnɪə/", def: "mất ngủ" },
                    { word: "Lifestyle", ipa: "/ˈlaɪfstaɪl/", def: "lối sống" },
                    { word: "Mental health", ipa: "/ˈmentl helθ/", def: "sức khỏe tâm thần" },
                    { word: "Nutrition", ipa: "/njuːˈtrɪʃən/", def: "dinh dưỡng" },
                    { word: "Obesity", ipa: "/əʊˈbiːsɪti/", def: "béo phì" },
                    { word: "Physical health", ipa: "/ˈfɪzɪkəl helθ/", def: "sức khỏe thể chất" },
                    { word: "Recovery", ipa: "/rɪˈkʌvəri/", def: "hồi phục" },
                    { word: "Stress", ipa: "/stres/", def: "căng thẳng" },
                    { word: "Therapy", ipa: "/ˈθerəpi/", def: "trị liệu" },
                    { word: "Vaccination", ipa: "/ˌvæksɪˈneɪʃən/", def: "tiêm chủng" },
                    { word: "Vitamin", ipa: "/ˈvɪtəmɪn/", def: "vitamin" },
                    { word: "Well-being", ipa: "/wel ˈbiːɪŋ/", def: "hạnh phúc, khỏe mạnh" }
                ], dialogue: [
                    { speaker: "Doctor", gender: "male", text: "Stress and anxiety can lead to insomnia and affect your mental health." },
                    { speaker: "Patient", gender: "female", text: "What should I do to improve my overall well-being?" },
                    { speaker: "Doctor", gender: "male", text: "Maintain a balanced diet, get regular exercise, and practice good hygiene." }
                ]},
                "unit-9": { title: "SOCIAL MEDIA", words: [
                    { word: "Account", ipa: "/əˈkaʊnt/", def: "tài khoản" },
                    { word: "Algorithm", ipa: "/ˈælɡərɪðm/", def: "thuật toán" },
                    { word: "Content", ipa: "/ˈkɒntent/", def: "nội dung" },
                    { word: "Digital", ipa: "/ˈdɪʤɪtl/", def: "kỹ thuật số" },
                    { word: "Engagement", ipa: "/ɪnˈɡeɪʤmənt/", def: "sự tương tác" },
                    { word: "Follower", ipa: "/ˈfɒləʊə/", def: "người theo dõi" },
                    { word: "Influencer", ipa: "/ˈɪnflʊənsə/", def: "người có sức ảnh hưởng" },
                    { word: "Interact", ipa: "/ˌɪntərˈækt/", def: "tương tác" },
                    { word: "Notification", ipa: "/ˌnəʊtɪfɪˈkeɪʃən/", def: "thông báo" },
                    { word: "Online", ipa: "/ˈɒnˌlaɪn/", def: "trực tuyến" },
                    { word: "Platform", ipa: "/ˈplætfɔːm/", def: "nền tảng" },
                    { word: "Post", ipa: "/pəʊst/", def: "đăng bài" },
                    { word: "Privacy", ipa: "/ˈpraɪvəsi/", def: "sự riêng tư" },
                    { word: "Profile", ipa: "/ˈprəʊfaɪl/", def: "hồ sơ cá nhân" },
                    { word: "Share", ipa: "/ʃeə/", def: "chia sẻ" },
                    { word: "Social network", ipa: "/ˈsəʊʃəl ˈnetwɜːk/", def: "mạng xã hội" },
                    { word: "Subscribe", ipa: "/səbˈskraɪb/", def: "đăng ký" },
                    { word: "Tag", ipa: "/tæɡ/", def: "gắn thẻ" },
                    { word: "Trend", ipa: "/trend/", def: "xu hướng" },
                    { word: "Viral", ipa: "/ˈvaɪərəl/", def: "lan truyền nhanh" }
                ], dialogue: [
                    { speaker: "Influencer", gender: "female", text: "I try to create viral content to get more followers on this platform." },
                    { speaker: "Friend", gender: "male", text: "Be careful with your privacy settings and the algorithms that track your data." },
                    { speaker: "Influencer", gender: "female", text: "I know. I always check my notifications and interact with my followers safely." }
                ]},
                "unit-10": { title: "LIFELONG LEARNING", words: [
                    { word: "Acquire", ipa: "/əˈkwaɪə/", def: "có được, đạt được" },
                    { word: "Adult education", ipa: "/ˌædʌlt edʒuˈkeɪʃn/", def: "giáo dục cho người lớn" },
                    { word: "Boost", ipa: "/buːst/", def: "tăng cường, cải thiện" },
                    { word: "Broaden", ipa: "/ˈbroadn/", def: "mở mang, mở rộng" },
                    { word: "Brush up", ipa: "/ˈbrʌʃ ʌp/", def: "ôn lại, học lại" },
                    { word: "Complex", ipa: "/ˈkɒmpleks/", def: "phức tạp" },
                    { word: "Determination", ipa: "/dɪˌtɜːmɪˈneɪʃn/", def: "sự quyết tâm" },
                    { word: "Distance learning", ipa: "/ˌdɪstəns ˈlɜːnɪŋ/", def: "học từ xa" },
                    { word: "Distraction", ipa: "/dɪˈstrækʃn/", def: "sự phân tâm" },
                    { word: "Hardship", ipa: "/ˈhɑːdʃɪp/", def: "sự khó khăn, vất vả" },
                    { word: "Knowledge", ipa: "/ˈnɒlɪdʒ/", def: "kiến thức" },
                    { word: "Life-long", ipa: "/ˈlaɪf lɒŋ/", def: "suốt đời" },
                    { word: "Motivation", ipa: "/ˌməʊtɪˈveɪʃn/", def: "động lực" },
                    { word: "Opportunity", ipa: "/ˌɒpəˈtjuːnəti/", def: "cơ hội" },
                    { word: "Pursue", ipa: "/pəˈsjuː/", def: "theo đuổi" },
                    { word: "Self-study", ipa: "/self ˈstʌdi/", def: "tự học" },
                    { word: "Skill", ipa: "/skɪl/", def: "kỹ năng" },
                    { word: "Tutor", ipa: "/ˈtjuːtə/", def: "gia sư" }
                ], dialogue: [
                    { speaker: "Coach", gender: "male", text: "Lifelong learning helps you acquire new skills and broaden your knowledge." },
                    { speaker: "Learner", gender: "female", text: "I'm using distance learning to pursue my passion for technology." },
                    { speaker: "Coach", gender: "male", text: "With motivation and determination, you can overcome any hardship in self-study." }
                ]}
            }
        };

        let currentGrade = "10";
        let currentUnit = "unit-1";
        let currentIndex = 0;
        let activeTab = "flashcard";

        // Game State Variables
        let selectedMatchCard = null;
        let matchedCount = 0;
        let totalPairs = 0;
        let currentFillBlankWord = null;
        let currentListeningWord = null;
        
        // Scramble Game Variables
        let currentScrambleWord = "";
        let currentScrambleInput = [];

        function init() {
            renderUnitButtons();
            updateUI();
            setupQuiz();
            
            document.querySelectorAll('.grade-btn').forEach(btn => {
                btn.onclick = () => {
                    currentGrade = btn.dataset.grade;
                    document.querySelectorAll('.grade-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentUnit = "unit-1";
                    currentIndex = 0;
                    renderUnitButtons();
                    updateUI();
                }
            });

            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.onclick = () => {
                    activeTab = btn.dataset.tab;
                    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
                    document.getElementById(`${activeTab}-section`).classList.remove('hidden');
                    if(activeTab === 'practice') {
                        switchPracticeMode('quiz');
                    }
                    if(activeTab === 'dialogue') renderDialogue();
                }
            });

            document.getElementById('fc-next').onclick = () => {
                const list = allVocabData[currentGrade][currentUnit].words;
                currentIndex = (currentIndex + 1) % list.length;
                resetFlashcard();
                updateUI();
            };
            document.getElementById('fc-prev').onclick = () => {
                const list = allVocabData[currentGrade][currentUnit].words;
                currentIndex = (currentIndex - 1 + list.length) % list.length;
                resetFlashcard();
                updateUI();
            };
            document.getElementById('fc-flip').onclick = () => {
                document.getElementById('main-flashcard').classList.toggle('flipped');
            };
            document.getElementById('main-flashcard').onclick = () => {
                document.getElementById('main-flashcard').classList.toggle('flipped');
            };

            // Input listener for Fill Blank to clear error state
            document.getElementById('fb-input').addEventListener('input', function() {
                this.classList.remove('text-red-600', 'text-green-600');
                document.getElementById('fb-feedback').textContent = '';
            });
        }

        function renderUnitButtons() {
            const container = document.getElementById('unit-selection');
            container.innerHTML = '';
            for(let i=1; i<=10; i++) {
                const btn = document.createElement('button');
                btn.className = `unit-button px-3 py-2 rounded-xl font-bold bg-gray-50 border border-emerald-100 transition text-sm ${currentUnit === 'unit-'+i ? 'active' : ''}`;
                btn.textContent = `U${i}`;
                btn.onclick = () => {
                    currentUnit = 'unit-'+i;
                    currentIndex = 0;
                    renderUnitButtons();
                    updateUI();
                    if(activeTab === 'dialogue') renderDialogue();
                    if(activeTab === 'practice') {
                        // Reset all practice modes
                        switchPracticeMode('quiz'); 
                    }
                };
                container.appendChild(btn);
            }
        }

        function updateUI() {
            const data = allVocabData[currentGrade][currentUnit];
            const words = data.words;
            const item = words[currentIndex];
            
            document.getElementById('display-title').textContent = `LỚP ${currentGrade} - UNIT ${currentUnit.split('-')[1]}: ${data.title}`;
            
            document.getElementById('fc-word').textContent = item.word;
            document.getElementById('fc-ipa-front').textContent = item.ipa;
            document.getElementById('fc-def').textContent = item.def;
            document.getElementById('fc-counter').textContent = `${currentIndex + 1} / ${words.length}`;
            
            const tbody = document.getElementById('vocab-table-body');
            tbody.innerHTML = words.map(v => `
                <tr class="hover:bg-emerald-50 transition">
                    <td class="p-4 font-bold text-emerald-700 flex items-center gap-2">
                        ${v.word}
                        <button onclick="speakText('${v.word.replace(/'/g, "\\'")}')" class="text-emerald-500 hover:text-emerald-700 ml-2" title="Nghe phát âm">
                            <i class="fas fa-volume-up"></i>
                        </button>
                    </td>
                    <td class="p-4 text-gray-500 font-mono italic">${v.ipa}</td>
                    <td class="p-4 text-gray-800">${v.def}</td>
                </tr>
            `).join('');
        }

        function renderDialogue() {
            const dialogue = allVocabData[currentGrade][currentUnit].dialogue || [];
            const container = document.getElementById('dialogue-content');
            container.innerHTML = dialogue.map(line => `
                <div class="dialogue-bubble ${line.gender}">
                    <span class="font-black ${line.gender === 'female' ? 'text-pink-600' : 'text-blue-600'} uppercase text-xs block mb-1">
                        <i class="fas ${line.gender === 'female' ? 'fa-venus' : 'fa-mars'} mr-1"></i> ${line.speaker}
                    </span>
                    <p class="text-gray-800 font-semibold leading-relaxed">${line.text}</p>
                </div>
            `).join('');
        }

        function speakDialogue() {
            const dialogue = allVocabData[currentGrade][currentUnit].dialogue || [];
            let voices = window.speechSynthesis.getVoices();
            let maleVoice = voices.find(v => v.name.includes('Male') || v.name.includes('David')) || voices[0];
            let femaleVoice = voices.find(v => v.name.includes('Female') || v.name.includes('Zira')) || voices[1];

            window.speechSynthesis.cancel();
            let chainSpeech = (index) => {
                if (index >= dialogue.length) return;
                const line = dialogue[index];
                const msg = new SpeechSynthesisUtterance(line.text);
                msg.lang = 'en-US';
                msg.rate = 0.95;
                msg.voice = line.gender === 'female' ? femaleVoice : maleVoice;
                msg.onend = () => chainSpeech(index + 1);
                window.speechSynthesis.speak(msg);
            };
            chainSpeech(0);
        }

        function resetFlashcard() {
            document.getElementById('main-flashcard').classList.remove('flipped');
        }

        function speakCurrentWord() {
            const word = allVocabData[currentGrade][currentUnit].words[currentIndex].word;
            speakText(word);
        }

        function speakText(text) {
             const msg = new SpeechSynthesisUtterance(text);
             msg.lang = 'en-US';
             window.speechSynthesis.speak(msg);
        }

        /* ----------------------------------------------------
           PRACTICE SECTION LOGIC
           ---------------------------------------------------- */
        
        function switchPracticeMode(mode) {
            // Hide all areas
            ['quiz-area', 'matching-area', 'listening-area', 'fillblank-area', 'scramble-area'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });

            // Deactivate all buttons
            document.querySelectorAll('.practice-menu-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-emerald-600', 'text-white', 'border-emerald-600');
                btn.classList.add('bg-white', 'text-gray-600', 'border-gray-200');
            });

            // Activate specific button and area
            const btn = document.getElementById(`btn-mode-${mode}`);
            btn.classList.remove('bg-white', 'text-gray-600', 'border-gray-200');
            btn.classList.add('active', 'bg-emerald-600', 'text-white', 'border-emerald-600');

            document.getElementById(`${mode}-area`).classList.remove('hidden');

            if (mode === 'quiz') setupQuiz();
            if (mode === 'matching') setupMatchingGame();
            if (mode === 'listening') setupListening();
            if (mode === 'fillblank') setupFillBlank();
            if (mode === 'scramble') setupScramble();
        }

        // --- 1. QUIZ LOGIC ---
        function setupQuiz() {
            const words = allVocabData[currentGrade][currentUnit].words;
            const correctItem = words[Math.floor(Math.random() * words.length)];
            const options = [correctItem.def];
            
            while(options.length < 4) {
                const randomDef = words[Math.floor(Math.random() * words.length)].def;
                if(!options.includes(randomDef)) options.push(randomDef);
            }
            options.sort(() => Math.random() - 0.5);

            document.getElementById('quiz-question').textContent = `Từ "${correctItem.word}" nghĩa là gì?`;
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            
            options.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = 'quiz-option';
                btn.textContent = opt;
                btn.onclick = () => {
                    document.querySelectorAll('.quiz-option').forEach(o => o.classList.add('pointer-events-none'));
                    if(opt === correctItem.def) {
                        btn.classList.add('correct');
                    } else {
                        btn.classList.add('incorrect');
                    }
                    document.getElementById('quiz-next-btn').classList.remove('hidden');
                };
                optionsContainer.appendChild(btn);
            });
            
            document.getElementById('quiz-next-btn').onclick = () => {
                document.getElementById('quiz-next-btn').classList.add('hidden');
                setupQuiz();
            };
        }

        // --- 2. MATCHING GAME LOGIC ---
        function setupMatchingGame() {
            selectedMatchCard = null;
            matchedCount = 0;
            document.getElementById('matching-message').innerText = "";

            let allWords = [...allVocabData[currentGrade][currentUnit].words];
            allWords.sort(() => Math.random() - 0.5);
            const gameWords = allWords.slice(0, 8); // Limit to 8 pairs
            totalPairs = gameWords.length;

            const enCol = document.getElementById('match-col-en');
            const viCol = document.getElementById('match-col-vi');
            enCol.innerHTML = '';
            viCol.innerHTML = '';

            const enCards = gameWords.map((item, index) => ({...item, id: index, type: 'en'}));
            enCards.sort(() => Math.random() - 0.5);

            const viCards = gameWords.map((item, index) => ({...item, id: index, type: 'vi'}));
            viCards.sort(() => Math.random() - 0.5);

            enCards.forEach(item => {
                const card = createMatchCard(item.word, item.id, 'en');
                const spk = document.createElement('span');
                spk.innerHTML = '<i class="fas fa-volume-up text-emerald-400 hover:text-emerald-600 ml-2"></i>';
                spk.onclick = (e) => { e.stopPropagation(); speakText(item.word); };
                card.appendChild(spk);
                enCol.appendChild(card);
            });

            viCards.forEach(item => {
                const card = createMatchCard(item.def, item.id, 'vi');
                viCol.appendChild(card);
            });
        }

        function createMatchCard(text, id, type) {
            const card = document.createElement('div');
            card.className = "card-item p-3 rounded-lg flex justify-between items-center font-medium text-gray-700";
            if (type === 'en') card.innerHTML = `<span>${text}</span>`;
            else card.textContent = text;
            
            card.dataset.id = id;
            card.dataset.type = type;
            card.onclick = () => handleMatchClick(card);
            return card;
        }

        function handleMatchClick(card) {
            if (card.classList.contains('matched') || card === selectedMatchCard) return;

            if (!selectedMatchCard) {
                selectedMatchCard = card;
                card.classList.add('selected');
                return;
            }

            if (selectedMatchCard.dataset.type === card.dataset.type) {
                selectedMatchCard.classList.remove('selected');
                selectedMatchCard = card;
                card.classList.add('selected');
                return;
            }

            if (selectedMatchCard.dataset.id === card.dataset.id) {
                selectedMatchCard.classList.remove('selected');
                selectedMatchCard.classList.add('matched');
                card.classList.add('matched');
                selectedMatchCard = null;
                matchedCount++;
                
                const msg = document.getElementById('matching-message');
                msg.innerText = "Chính xác! 🎉";
                msg.className = "h-6 text-sm font-bold mt-2 text-emerald-600";
                if (matchedCount === totalPairs) msg.innerText = "Chúc mừng! Bạn đã hoàn thành bài tập! 🏆";
            } else {
                const tempSelected = selectedMatchCard;
                tempSelected.classList.remove('selected');
                tempSelected.classList.add('incorrect-match');
                card.classList.add('incorrect-match');
                
                document.getElementById('matching-message').innerText = "Chưa đúng, thử lại nhé!";
                document.getElementById('matching-message').className = "h-6 text-sm font-bold mt-2 text-orange-500";
                selectedMatchCard = null;
                
                setTimeout(() => {
                    tempSelected.classList.remove('incorrect-match');
                    card.classList.remove('incorrect-match');
                }, 600);
            }
        }

        // --- 3. LISTENING MODE LOGIC ---
        function setupListening() {
            const words = allVocabData[currentGrade][currentUnit].words;
            const correctItem = words[Math.floor(Math.random() * words.length)];
            currentListeningWord = correctItem.word;
            
            const options = [correctItem.def];
            while(options.length < 4) {
                const randomDef = words[Math.floor(Math.random() * words.length)].def;
                if(!options.includes(randomDef)) options.push(randomDef);
            }
            options.sort(() => Math.random() - 0.5);

            const optionsContainer = document.getElementById('listening-options');
            optionsContainer.innerHTML = '';
            
            options.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = 'quiz-option';
                btn.textContent = opt;
                btn.onclick = () => {
                    document.querySelectorAll('.quiz-option').forEach(o => o.classList.add('pointer-events-none'));
                    if(opt === correctItem.def) {
                        btn.classList.add('correct');
                        btn.innerHTML += ' <i class="fas fa-check ml-2"></i>';
                    } else {
                        btn.classList.add('incorrect');
                    }
                    document.getElementById('listening-next-btn').classList.remove('hidden');
                };
                optionsContainer.appendChild(btn);
            });
            
            document.getElementById('listening-next-btn').classList.add('hidden');
            document.getElementById('listening-next-btn').onclick = setupListening;
            
            // Auto play sound once
            setTimeout(() => speakText(currentListeningWord), 500);
        }

        function replayListening() {
            if(currentListeningWord) speakText(currentListeningWord);
        }

        // --- 4. FILL IN THE BLANK LOGIC ---
        function setupFillBlank() {
            const words = allVocabData[currentGrade][currentUnit].words;
            const item = words[Math.floor(Math.random() * words.length)];
            currentFillBlankWord = item.word;

            document.getElementById('fb-def').textContent = item.def;
            document.getElementById('fb-input').value = '';
            document.getElementById('fb-input').classList.remove('text-green-600', 'text-red-600');
            document.getElementById('fb-feedback').textContent = '';
            document.getElementById('fb-hint').textContent = '';
            document.getElementById('fb-next-btn').classList.add('hidden');
            document.getElementById('fb-input').focus();
        }

        function showHint() {
            if(currentFillBlankWord) {
                const firstChar = currentFillBlankWord.charAt(0);
                const length = currentFillBlankWord.length;
                document.getElementById('fb-hint').textContent = `Gợi ý: Bắt đầu bằng chữ "${firstChar}" (${length} ký tự)`;
            }
        }

        function checkFillBlank() {
            const input = document.getElementById('fb-input');
            const feedback = document.getElementById('fb-feedback');
            const userVal = input.value.trim().toLowerCase();
            const correctVal = currentFillBlankWord.toLowerCase();

            if (userVal === correctVal) {
                input.classList.add('text-green-600');
                feedback.innerHTML = '<span class="text-green-600"><i class="fas fa-check-circle"></i> Chính xác!</span>';
                document.getElementById('fb-next-btn').classList.remove('hidden');
                speakText(currentFillBlankWord);
            } else {
                input.classList.add('text-red-600');
                feedback.innerHTML = '<span class="text-red-500"><i class="fas fa-times-circle"></i> Sai rồi. Thử lại nhé!</span>';
                input.classList.add('incorrect-match'); // Reuse animation
                setTimeout(() => input.classList.remove('incorrect-match'), 500);
            }
        }

        document.getElementById('fb-next-btn').onclick = setupFillBlank;

        // --- 5. WORD SCRAMBLE LOGIC (DRAG & DROP VERSION) ---
        function setupScramble() {
            const words = allVocabData[currentGrade][currentUnit].words;
            const item = words[Math.floor(Math.random() * words.length)];
            currentScrambleWord = item.word.replace(/\s+/g, ''); // Remove spaces for gameplay
            
            // Array of size N, initially empty (null)
            currentScrambleInput = new Array(currentScrambleWord.length).fill(null);

            document.getElementById('scramble-def').textContent = item.def;
            document.getElementById('scramble-feedback').textContent = '';
            document.getElementById('scramble-next-btn').classList.add('hidden');

            const slotsContainer = document.getElementById('scramble-slots');
            const poolContainer = document.getElementById('scramble-pool');
            slotsContainer.innerHTML = '';
            poolContainer.innerHTML = '';

            const letters = currentScrambleWord.split('');
            const shuffled = [...letters].sort(() => 0.5 - Math.random());

            // 1. Create Slots
            letters.forEach((_, idx) => {
                const slot = document.createElement('div');
                slot.className = 'letter-slot';
                slot.dataset.index = idx; // Store index to map later
                slotsContainer.appendChild(slot);
            });

            // 2. Create Draggable Chips
            shuffled.forEach((char, index) => {
                const chip = document.createElement('div');
                chip.className = 'letter-chip';
                chip.textContent = char;
                chip.dataset.char = char;
                chip.dataset.originalIndex = index;
                poolContainer.appendChild(chip);
            });

            // 3. Initialize Draggable
            initDraggable();
        }

        function initDraggable() {
            Draggable.create(".letter-chip", {
                type: "x,y",
                edgeResistance: 0.65,
                bounds: "#practice-section", // Limit dragging area
                zIndexBoost: false,
                onPress: function() {
                    // Start dragging style
                    this.target.style.zIndex = 100;
                },
                onRelease: function() {
                    this.target.style.zIndex = 10;
                    
                    let droppedInSlot = false;
                    const slots = document.querySelectorAll('.letter-slot');
                    
                    // Check collision with any slot
                    for (let i = 0; i < slots.length; i++) {
                        const slot = slots[i];
                        if (this.hitTest(slot, "50%")) {
                            // Logic: If slot is empty?
                            // For simplicity in this game: Always snap if dropped nearby.
                            // If slot is already filled conceptually, we might overwrite or bounce back.
                            // Let's implement: If slot is conceptually empty (based on UI class .filled)
                            
                            const slotIndex = parseInt(slot.dataset.index);

                            if (!slot.classList.contains('filled')) {
                                droppedInSlot = true;
                                
                                // Animate into exact position
                                const slotRect = slot.getBoundingClientRect();
                                const chipRect = this.target.getBoundingClientRect();
                                
                                // The chip is in the pool container, slot is in slot container.
                                // We rely on GSAP relative translation.
                                // But GSAP Draggable changed x/y transform. 
                                // Easiest way: Append chip to slot? No, that messes up Drag reference usually.
                                // Better: Calculate delta to center it visually.
                                
                                // Using the `this` context from Draggable to tween to the slot center
                                // Actually, hitTest is good, but let's visually snap it.
                                
                                // NOTE: Since layouts are different, moving DOM elements is safer for responsiveness,
                                // but requires re-instantiating Draggable or careful handling.
                                // ALTERNATIVE: Just snap visual transform to match the slot center.
                                
                                // Simple Snap Logic:
                                // Get center of slot
                                const slotCx = slotRect.left + slotRect.width / 2;
                                const slotCy = slotRect.top + slotRect.height / 2;
                                
                                // Get center of chip currently
                                const chipCx = chipRect.left + chipRect.width / 2;
                                const chipCy = chipRect.top + chipRect.height / 2;
                                
                                const dx = slotCx - chipCx;
                                const dy = slotCy - chipCy;
                                
                                gsap.to(this.target, {
                                    x: "+=" + dx,
                                    y: "+=" + dy,
                                    duration: 0.2
                                });

                                // Mark logical state
                                slot.classList.add('filled');
                                this.target.classList.add('correct-place'); // Visual feedback
                                this.target.dataset.placedInSlot = slotIndex;
                                this.disable(); // Lock it in place once dropped (optional, usually good for simple games)
                                
                                // Update Data Array
                                currentScrambleInput[slotIndex] = this.target.dataset.char;
                                
                                checkScramble();
                            }
                            break; // Stop checking other slots
                        }
                    }

                    if (!droppedInSlot) {
                        // Revert to original position if missed
                        gsap.to(this.target, {
                            x: 0,
                            y: 0,
                            duration: 0.3,
                            ease: "power2.out"
                        });
                    }
                }
            });
        }

        function resetScramble() {
            // Reset Arrays
            if(currentScrambleWord) {
                currentScrambleInput = new Array(currentScrambleWord.length).fill(null);
            }
            
            // Visual Reset
            const chips = document.querySelectorAll('.letter-chip');
            chips.forEach(chip => {
                // Re-enable dragging if disabled
                const draggableInstance = Draggable.get(chip);
                if (draggableInstance) draggableInstance.enable();
                
                chip.classList.remove('correct-place');
                delete chip.dataset.placedInSlot;
                
                // Return to pool (x:0, y:0 relative to start)
                gsap.to(chip, { x: 0, y: 0, duration: 0.4 });
            });

            // Clear Slots
            document.querySelectorAll('.letter-slot').forEach(s => s.classList.remove('filled'));
            
            document.getElementById('scramble-feedback').textContent = '';
            document.getElementById('scramble-next-btn').classList.add('hidden');
        }

        function checkScramble() {
            // Check if array is full
            const isFull = currentScrambleInput.every(val => val !== null);
            
            if (isFull) {
                const userInput = currentScrambleInput.join('').toLowerCase();
                const target = currentScrambleWord.toLowerCase();
                const feedback = document.getElementById('scramble-feedback');
                
                if (userInput === target) {
                    feedback.innerHTML = '<span class="text-green-600"><i class="fas fa-check-circle"></i> Chính xác!</span>';
                    document.getElementById('scramble-next-btn').classList.remove('hidden');
                    speakText(currentScrambleWord); // Added speak here too
                    
                    // Add bounce effect to all chips
                    gsap.to(".letter-chip", { y: -10, yoyo: true, repeat: 1, duration: 0.1, stagger: 0.05 });
                } else {
                    feedback.innerHTML = '<span class="text-red-500"><i class="fas fa-times-circle"></i> Sai rồi, hãy bấm "Làm lại" để thử lại!</span>';
                }
            }
        }

        document.getElementById('scramble-next-btn').onclick = setupScramble;

        // Init on load
        window.onload = () => {
            init();
            window.speechSynthesis.onvoiceschanged = () => {
                console.log("Voices loaded");
            };
        };
    </script>
</body>
</html>